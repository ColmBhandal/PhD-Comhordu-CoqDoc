<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>SoftwareLanguage</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library SoftwareLanguage</h1>

<div class="code">
</div>

<div class="doc">
This file was written by Colm Bhandal, PhD student, Foundations and Methods group,
School of Computer Science and Statistics, Trinity College, Dublin, Ireland.
<div class="paragraph"> </div>

 The software component of the language is here defined.
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.GenTacs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.StandardResults</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Decidable</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ListSet</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.LanguageFoundations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.ComhBasics</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Names for defining parametrised processes.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">Name</span> := <span class="id" title="var">bcWaitN</span> | <span class="id" title="var">sleepingN</span> | <span class="id" title="var">bcReadyN</span> | <span class="id" title="var">dormantN</span> | <span class="id" title="var">initN</span> | <br/>
&nbsp;&nbsp;<span class="id" title="var">ovWaitN</span> | <span class="id" title="var">ovReadyN</span> | <span class="id" title="var">switchBcN</span> | <span class="id" title="var">switchCurrN</span> | <span class="id" title="var">switchListenN</span> | <span class="id" title="var">ovAbortN</span> | <br/>
&nbsp;&nbsp;<span class="id" title="var">tfsStartN</span> | <span class="id" title="var">tfsNextN</span> | <span class="id" title="var">tfsCurrN</span> | <span class="id" title="var">tfsBcN</span> | <span class="id" title="var">tfsListenN</span> | <span class="id" title="var">listeningN</span> | <span class="id" title="var">checkRangeN</span> | <br/>
&nbsp;&nbsp;<span class="id" title="var">rangeBadN</span> | <span class="id" title="var">currEqN</span> | <span class="id" title="var">badOvlpN</span> | <span class="id" title="var">currOKN</span> | <span class="id" title="var">nextEqN</span> | <span class="id" title="var">abortOvlpN</span> | <span class="id" title="var">gotMsgN</span> |<br/>
&nbsp;&nbsp;<span class="id" title="var">gotRangeN</span> | <span class="id" title="var">currPincCheckN</span> | <span class="id" title="var">currCompN</span> | <span class="id" title="var">nextPincCheckN</span> | <span class="id" title="var">pausedN</span>.<br/>

<br/>
</div>

<div class="doc">
Equality is decidable on names.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqDecName</span> : <span class="id" title="var">eqDec</span> <span class="id" title="var">Name</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">eqDec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x1</span>, <span class="id" title="var">x2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The set of process terms, which may have free variables in them.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">ProcTerm</span> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">nilProc</span> : <span class="id" title="var">ProcTerm</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">outPrefix</span> : <span class="id" title="var">Channel</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">Exp</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">inPrefix</span> : <span class="id" title="var">Channel</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">Var</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">ifThen</span> : <span class="id" title="var">BoolExp</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">sum</span> : <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">parComp</span> : <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">app</span> : <span class="id" title="var">Name</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">Exp</span> -&gt; <span class="id" title="var">ProcTerm</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">del</span> : <span class="id" title="var">Exp</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span>.<br/>

<br/>
</div>

<div class="doc">
Process language syntactic sugar.
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> &quot;c $&lt; l &gt;$ ? P" := (<span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;c $&lt; l &gt;$ ! P" := (<span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;c ? P" := (<span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> [] <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;c ! P" := (<span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> [] <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;B $&gt; P" := (<span class="id" title="var">ifThen</span> <span class="id" title="var">B</span> <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;P $+$ Q" := (<span class="id" title="var">sum</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> &quot;P $||$ Q" := (<span class="id" title="var">parComp</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 45, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;h $( l )$" := (<span class="id" title="var">app</span> <span class="id" title="var">h</span> <span class="id" title="var">l</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot; $&lt; E &gt;$ P " := (<span class="id" title="var">del</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
A name applied to the empty list is a process term, which can just be
specified using the name.
</div>
<div class="code">
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">liftNameProc</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Name</span>) : <span class="id" title="var">ProcTerm</span> := <span class="id" title="var">n</span> $([])$.<br/>

<br/>
</div>

<div class="doc">
Equality is decidable on ProcTerms.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqDecProcTerm</span> : <span class="id" title="var">eqDec</span> <span class="id" title="var">ProcTerm</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">eqDec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x1</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">x2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">reflexivity</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1</span> <span class="id" title="var">x2</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">right</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">reflexivity</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecChannel</span> <span class="id" title="var">c</span> <span class="id" title="var">c0</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1</span> <span class="id" title="var">x2</span>); <span class="id" title="var">addHyp</span> (<span class="id" title="var">list_eq_dec</span> <span class="id" title="var">eqDecExp</span> <span class="id" title="var">l</span> <span class="id" title="var">l0</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; [<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>;[<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>|<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">reflexivity</span>] |<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>] |<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecChannel</span> <span class="id" title="var">c</span> <span class="id" title="var">c0</span>); <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1</span> <span class="id" title="var">x2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">list_eq_dec</span> <span class="id" title="var">eqDecVar</span> <span class="id" title="var">l</span> <span class="id" title="var">l0</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; [<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>;[<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>|<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">reflexivity</span>] |<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>] |<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecBoolExp</span> <span class="id" title="var">b</span> <span class="id" title="var">b0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1</span> <span class="id" title="var">x2</span>); <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">right</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1_1</span> <span class="id" title="var">x2_1</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1_2</span> <span class="id" title="var">x2_2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1_1</span> <span class="id" title="var">x2_1</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1_2</span> <span class="id" title="var">x2_2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecName</span> <span class="id" title="var">n</span> <span class="id" title="var">n0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">list_eq_dec</span> <span class="id" title="var">eqDecExp</span> <span class="id" title="var">l</span> <span class="id" title="var">l0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHx1</span> <span class="id" title="var">x2</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecExp</span> <span class="id" title="var">e</span> <span class="id" title="var">e0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Note that the specification of the protocol ideally should be left separate to the
language specification. Specifying the protocol here entangles it with the language.
A more general language definition would be in terms of a def relation that is left
unspecified. However, specifying the protocol and the def relation here has the advantage
that we can prove certain desirable language properties based on the finiteness of the
def relation that would otherwise be unprovable. These properties are of significant
practical use and so we choose to specify the language and protocol in this way despite its
conceptual messiness.
<div class="paragraph"> </div>

 Aliases for variables to decrease verbosity
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vM</span> := (<span class="id" title="var">var</span> 0).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vMF</span> := (<span class="id" title="var">var</span> 1).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vM'</span> := (<span class="id" title="var">var</span> 2).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vM''</span> := (<span class="id" title="var">var</span> 3).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vL</span> := (<span class="id" title="var">var</span> 4).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vL'</span> := (<span class="id" title="var">var</span> 5).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vT</span> := (<span class="id" title="var">var</span> 6).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vT'</span> := (<span class="id" title="var">var</span> 7).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vR</span> := (<span class="id" title="var">var</span> 8).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vX</span> := (<span class="id" title="var">var</span> 9).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">vY</span> := (<span class="id" title="var">var</span> 10).<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bcWait</span> (<span class="id" title="var">m</span> <span class="id" title="var">x</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanTrans</span>? <span class="id" title="var">sleepingN</span> $+$ $&lt;<span class="id" title="var">x</span>&gt;$<span class="id" title="var">chanPos</span>$&lt;<span class="id" title="var">vL</span>&gt;$? <span class="id" title="var">bcReadyN</span> $([<span class="id" title="var">m</span>, <span class="id" title="var">eVar</span> <span class="id" title="var">vL</span>])$ $+$ <span class="id" title="var">chanWake</span>$&lt;<span class="id" title="var">vM</span>&gt;$? <span class="id" title="var">bcWaitN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>, <span class="id" title="var">liftTimeExp</span> <span class="id" title="var">zeroTime</span>])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sleeping</span> := <span class="id" title="var">chanWake</span>$&lt;<span class="id" title="var">vM</span>&gt;$? <span class="id" title="var">bcWaitN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>, <span class="id" title="var">liftTimeExp</span> <span class="id" title="var">zeroTime</span>])$ $+$ <span class="id" title="var">chanTrans</span>? <span class="id" title="var">sleepingN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bcReady</span> (<span class="id" title="var">m</span> <span class="id" title="var">l</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanOutProc</span>$&lt;[<span class="id" title="var">m</span>, <span class="id" title="var">l</span>]&gt;$!<span class="id" title="var">bcWaitN</span> $([<span class="id" title="var">m</span>, (<span class="id" title="var">ePeriod</span> <span class="id" title="var">m</span>)])$.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dormant</span> := <span class="id" title="var">chanMNext</span>$&lt;<span class="id" title="var">vM'</span>&gt;$? <span class="id" title="var">initN</span> $(<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>)$ $+$ <span class="id" title="var">chanAbort</span>? <span class="id" title="var">dormantN</span> $+$ <span class="id" title="var">chanBad</span>? <span class="id" title="var">tfsStartN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">init</span> (<span class="id" title="var">m'</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanMCurr</span>$&lt;<span class="id" title="var">vM</span>&gt;$? <span class="id" title="var">ovWaitN</span> $([<span class="id" title="var">m'</span>, (<span class="id" title="var">eAdd</span> (<span class="id" title="var">eWaitTime</span> <span class="id" title="var">vM</span> <span class="id" title="var">m'</span>) (<span class="id" title="var">ePeriod</span> <span class="id" title="var">m'</span>)), <span class="id" title="var">liftTimeExp</span> <span class="id" title="var">zeroTime</span>])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ovWait</span> (<span class="id" title="var">m'</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanAbort</span>? <span class="id" title="var">ovAbortN</span> $+$ <span class="id" title="var">chanBad</span>? <span class="id" title="var">tfsStartN</span> $+$ $&lt;<span class="id" title="var">y</span>&gt;$<span class="id" title="var">chanPos</span>$&lt;<span class="id" title="var">vL</span>&gt;$? <span class="id" title="var">ovReadyN</span> $([<span class="id" title="var">m'</span>, <span class="id" title="var">t</span>, <span class="id" title="var">eVar</span> <span class="id" title="var">vL</span>])$ $+$ $&lt;<span class="id" title="var">x</span>&gt;$<span class="id" title="var">chanPause</span>!<span class="id" title="var">switchBcN</span> $(<span class="id" title="var">m'</span>)$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ovReady</span> (<span class="id" title="var">m'</span> <span class="id" title="var">t</span> <span class="id" title="var">l</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanOutProc</span>$&lt;[<span class="id" title="var">m'</span>, <span class="id" title="var">l</span>]&gt;$!<span class="id" title="var">ovWaitN</span> $([<span class="id" title="var">m'</span>, (<span class="id" title="var">eSubtract</span> <span class="id" title="var">t</span> (<span class="id" title="var">ePeriod</span> <span class="id" title="var">m'</span>)), (<span class="id" title="var">ePeriod</span> <span class="id" title="var">m'</span>)])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">switchBc</span> (<span class="id" title="var">m'</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanWake</span>$&lt;<span class="id" title="var">m'</span>&gt;$!<span class="id" title="var">switchCurrN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">switchCurr</span> := <span class="id" title="var">chanMCurr</span>!<span class="id" title="var">switchListenN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">switchListen</span> := <span class="id" title="var">chanUnpause</span>!<span class="id" title="var">dormantN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tfsStart</span> := <span class="id" title="var">chanMCurr</span>$&lt;<span class="id" title="var">vM</span>&gt;$? <span class="id" title="var">tfsNextN</span> $(<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>)$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tfsNext</span> (<span class="id" title="var">m</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanMNext</span>$&lt;<span class="id" title="var">eFailSafeSucc</span> <span class="id" title="var">m</span>&gt;$!<span class="id" title="var">tfsCurrN</span> $+$ <span class="id" title="var">chanMStable</span>!<span class="id" title="var">tfsNextN</span> $(<span class="id" title="var">m</span>)$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tfsCurr</span> := <span class="id" title="var">chanAbort</span>? <span class="id" title="var">tfsCurrN</span> $+$ <span class="id" title="var">chanBad</span>? <span class="id" title="var">tfsCurrN</span> $+$ <span class="id" title="var">chanMCurr</span>!<span class="id" title="var">tfsBcN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tfsBc</span> := <span class="id" title="var">chanTrans</span>!<span class="id" title="var">tfsListenN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">tfsListen</span> := <span class="id" title="var">chanAbort</span>? <span class="id" title="var">tfsListenN</span> $+$ <span class="id" title="var">chanBad</span>? <span class="id" title="var">tfsListenN</span> $+$ <span class="id" title="var">chanUnpause</span>!<span class="id" title="var">dormantN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ovAbort</span> := <span class="id" title="var">chanMStable</span>!<span class="id" title="var">dormantN</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">listening</span> := <span class="id" title="var">chanAN</span>$&lt;[<span class="id" title="var">vR</span>, <span class="id" title="var">vM''</span>]&gt;$? <span class="id" title="var">checkRangeN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>, <span class="id" title="var">eVar</span> <span class="id" title="var">vR</span>])$ $+$ <span class="id" title="var">chanInProc</span>$&lt;[<span class="id" title="var">vM''</span>, <span class="id" title="var">vL'</span>]&gt;$? <span class="id" title="var">gotMsgN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>, <span class="id" title="var">eVar</span> <span class="id" title="var">vL'</span>])$ $+$ <span class="id" title="var">chanPause</span>? <span class="id" title="var">pausedN</span> $+$ <span class="id" title="var">chanUnpause</span>? <span class="id" title="var">listeningN</span>.<br/>

<br/>
</div>

<div class="doc">
States for handling notification 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">checkRange</span> (<span class="id" title="var">m''</span> <span class="id" title="var">r</span> : <span class="id" title="var">Exp</span>) := (<span class="id" title="var">bSufficient</span> <span class="id" title="var">m''</span> <span class="id" title="var">r</span> $&gt; <span class="id" title="var">listeningN</span>) $+$ !~(<span class="id" title="var">bSufficient</span> (<span class="id" title="var">m''</span>) (<span class="id" title="var">r</span>)) $&gt; <span class="id" title="var">rangeBadN</span> $(<span class="id" title="var">m''</span>)$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">rangeBad</span> (<span class="id" title="var">m''</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanMCurr</span>$&lt;<span class="id" title="var">vM</span>&gt;$? <span class="id" title="var">currEqN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>, <span class="id" title="var">m''</span>])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">currEq</span> (<span class="id" title="var">m</span> <span class="id" title="var">m''</span> : <span class="id" title="var">Exp</span>) := (<span class="id" title="var">m</span> =<span class="id" title="var">b</span>= <span class="id" title="var">m''</span>) $&gt; <span class="id" title="var">badOvlpN</span> $+$ !~(<span class="id" title="var">m</span> =<span class="id" title="var">b</span>= <span class="id" title="var">m''</span>) $&gt; <span class="id" title="var">currOKN</span> $(<span class="id" title="var">m''</span>)$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">badOvlp</span> := <span class="id" title="var">chanBad</span>!<span class="id" title="var">listeningN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">currOK</span> (<span class="id" title="var">m''</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanMStable</span>? <span class="id" title="var">listeningN</span> $+$ <span class="id" title="var">chanMNext</span>$&lt;<span class="id" title="var">vM'</span>&gt;$? <span class="id" title="var">nextEqN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>, <span class="id" title="var">m''</span>])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">nextEq</span> (<span class="id" title="var">m'</span> <span class="id" title="var">m''</span> : <span class="id" title="var">Exp</span>) := (<span class="id" title="var">m'</span> =<span class="id" title="var">b</span>= <span class="id" title="var">m''</span>) $&gt; <span class="id" title="var">abortOvlpN</span> $+$ !~(<span class="id" title="var">m'</span> =<span class="id" title="var">b</span>= <span class="id" title="var">m''</span>) $&gt; <span class="id" title="var">listeningN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">abortOvlp</span> := <span class="id" title="var">chanAbort</span>!<span class="id" title="var">listeningN</span>.<br/>

<br/>
</div>

<div class="doc">
States for handling messages 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">gotMsg</span> (<span class="id" title="var">m''</span> <span class="id" title="var">l'</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanPos</span>$&lt;<span class="id" title="var">vL</span>&gt;$? <span class="id" title="var">gotRangeN</span> $([<span class="id" title="var">m''</span>, (|<span class="id" title="var">vL</span> , <span class="id" title="var">l'</span>| (-) <span class="id" title="var">speedMax</span> (.) <span class="id" title="var">msgLatency</span>)])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">gotRange</span> (<span class="id" title="var">m''</span> <span class="id" title="var">r</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanMCurr</span>$&lt;<span class="id" title="var">vM</span>&gt;$? <span class="id" title="var">currPincCheckN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>, <span class="id" title="var">m''</span>, <span class="id" title="var">r</span>])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">currPincCheck</span> (<span class="id" title="var">m</span> <span class="id" title="var">m''</span> <span class="id" title="var">r</span>  : <span class="id" title="var">Exp</span>) := !~<span class="id" title="var">bPossInc</span> <span class="id" title="var">m</span> <span class="id" title="var">m''</span> <span class="id" title="var">r</span> $&gt; <span class="id" title="var">currCompN</span> $([<span class="id" title="var">m''</span>, <span class="id" title="var">r</span>])$ $+$ <span class="id" title="var">bPossInc</span> <span class="id" title="var">m</span> <span class="id" title="var">m''</span> <span class="id" title="var">r</span> $&gt; <span class="id" title="var">badOvlpN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">currComp</span> (<span class="id" title="var">m''</span> <span class="id" title="var">r</span> : <span class="id" title="var">Exp</span>) := <span class="id" title="var">chanMStable</span>? <span class="id" title="var">listeningN</span> $+$ <span class="id" title="var">chanMNext</span>$&lt;<span class="id" title="var">vM'</span>&gt;$? <span class="id" title="var">nextPincCheckN</span> $([<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>, <span class="id" title="var">m''</span>, <span class="id" title="var">r</span>])$.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">nextPincCheck</span> (<span class="id" title="var">m'</span> <span class="id" title="var">m''</span> <span class="id" title="var">r</span> : <span class="id" title="var">Exp</span>) :=  !~<span class="id" title="var">bPossInc</span> <span class="id" title="var">m'</span> <span class="id" title="var">m''</span> <span class="id" title="var">r</span> $&gt; <span class="id" title="var">listeningN</span> $+$ <span class="id" title="var">bPossInc</span> <span class="id" title="var">m'</span> <span class="id" title="var">m''</span> <span class="id" title="var">r</span> $&gt; <span class="id" title="var">abortOvlpN</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">paused</span> := <span class="id" title="var">chanUnpause</span>? <span class="id" title="var">listeningN</span>.<br/>

<br/>
</div>

<div class="doc">
Redefining pair notation as it was overwritten by interval notation for real numbers.
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> &quot;( a , b )" := (<span class="id" title="var">pair</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">def</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Name</span>) : (<span class="id" title="var">list</span> <span class="id" title="var">Var</span> * <span class="id" title="var">ProcTerm</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">bcWaitN</span> =&gt; ([<span class="id" title="var">vM</span>, <span class="id" title="var">vX</span>], <span class="id" title="var">bcWait</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vX</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">sleepingN</span> =&gt; ([], <span class="id" title="var">sleeping</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">bcReadyN</span> =&gt; ([<span class="id" title="var">vM</span>,  <span class="id" title="var">vL</span> ], <span class="id" title="var">bcReady</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>)  (<span class="id" title="var">eVar</span> <span class="id" title="var">vL</span>) )<br/>
&nbsp;&nbsp;| <span class="id" title="var">dormantN</span> =&gt; ([], <span class="id" title="var">dormant</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">initN</span> =&gt; ([<span class="id" title="var">vM'</span>], <span class="id" title="var">init</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>))<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;| <span class="id" title="var">ovWaitN</span> =&gt; ([<span class="id" title="var">vM'</span>, <span class="id" title="var">vT</span>, <span class="id" title="var">vY</span>], <span class="id" title="var">ovWait</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vT</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vT</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vY</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">ovReadyN</span> =&gt; ([<span class="id" title="var">vM'</span>, <span class="id" title="var">vT</span>,  <span class="id" title="var">vL</span>], <span class="id" title="var">ovReady</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vT</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vL</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">switchBcN</span> =&gt; ([<span class="id" title="var">vM'</span>], <span class="id" title="var">switchBc</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">switchCurrN</span> =&gt; ([], <span class="id" title="var">switchCurr</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">switchListenN</span> =&gt; ([], <span class="id" title="var">switchListen</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">ovAbortN</span> =&gt; ([], <span class="id" title="var">ovAbort</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">tfsStartN</span> =&gt; ([], <span class="id" title="var">tfsStart</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">tfsNextN</span> =&gt; ([<span class="id" title="var">vM</span>], <span class="id" title="var">tfsNext</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">tfsCurrN</span> =&gt; ([], <span class="id" title="var">tfsCurr</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">tfsBcN</span> =&gt; ([], <span class="id" title="var">tfsBc</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">tfsListenN</span> =&gt; ([], <span class="id" title="var">tfsListen</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">listeningN</span> =&gt; ([], <span class="id" title="var">listening</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">checkRangeN</span> =&gt; ([<span class="id" title="var">vM''</span>, <span class="id" title="var">vR</span>], <span class="id" title="var">checkRange</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vR</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">rangeBadN</span> =&gt; ([<span class="id" title="var">vM''</span>], <span class="id" title="var">rangeBad</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">currEqN</span> =&gt; ([<span class="id" title="var">vM</span>, <span class="id" title="var">vM''</span>], <span class="id" title="var">currEq</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">badOvlpN</span> =&gt; ([], <span class="id" title="var">badOvlp</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">currOKN</span> =&gt; ([<span class="id" title="var">vM''</span>], <span class="id" title="var">currOK</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">nextEqN</span> =&gt; ([<span class="id" title="var">vM'</span>, <span class="id" title="var">vM''</span>], <span class="id" title="var">nextEq</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">abortOvlpN</span> =&gt; ([], <span class="id" title="var">abortOvlp</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">gotMsgN</span> =&gt; ([<span class="id" title="var">vM''</span>,  <span class="id" title="var">vL'</span>], <span class="id" title="var">gotMsg</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vL'</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">gotRangeN</span> =&gt; ([<span class="id" title="var">vM''</span>, <span class="id" title="var">vR</span>], <span class="id" title="var">gotRange</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vR</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">currPincCheckN</span> =&gt; ([<span class="id" title="var">vM</span>, <span class="id" title="var">vM''</span>, <span class="id" title="var">vR</span>], <span class="id" title="var">currPincCheck</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vR</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">currCompN</span> =&gt; ([<span class="id" title="var">vM''</span>, <span class="id" title="var">vR</span>], <span class="id" title="var">currComp</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vR</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">nextPincCheckN</span> =&gt; ([<span class="id" title="var">vM'</span>, <span class="id" title="var">vM''</span>, <span class="id" title="var">vR</span>], <span class="id" title="var">nextPincCheck</span> (<span class="id" title="var">eVar</span> <span class="id" title="var">vM'</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vM''</span>) (<span class="id" title="var">eVar</span> <span class="id" title="var">vR</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">pausedN</span> =&gt; ([], <span class="id" title="var">paused</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The protocol process is the parallel composition of the three processes below.
Notice that we could have defined this process via the def relation. However,
the def relation is only necessary for recursive references, of which there are
none here i.e. procProtocol is not on the right hand side of any of the def
equations. Hence there is no need to use the def relation, which in any case would
have made for more cumbersome developments later on.
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">procProtocol</span> := <span class="id" title="var">sleeping</span> $||$ <span class="id" title="var">dormant</span> $||$ <span class="id" title="var">listening</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Susbstitution of expressions for variables in a term. Essentially maps
the substitution across the term, calling on expression substitution in the
meantime.
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">subProcTerm</span> (<span class="id" title="var">s</span> : <span class="id" title="var">Subst</span>) (<span class="id" title="var">t</span> : <span class="id" title="var">ProcTerm</span>) : <span class="id" title="var">ProcTerm</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">nilProc</span> =&gt; <span class="id" title="var">nilProc</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">t'</span> =&gt; <span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> (<span class="id" title="var">listSub</span> <span class="id" title="var">s</span> <span class="id" title="var">l</span>) (<span class="id" title="var">subProcTerm</span> <span class="id" title="var">s</span> <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;| <span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">t'</span> =&gt; <span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">resetSub</span> <span class="id" title="var">s</span> <span class="id" title="var">l</span>) <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">ifThen</span> <span class="id" title="var">b</span> <span class="id" title="var">t'</span> =&gt; <span class="id" title="var">ifThen</span> (<span class="id" title="var">subBoolExp</span> <span class="id" title="var">s</span> <span class="id" title="var">b</span>) (<span class="id" title="var">subProcTerm</span> <span class="id" title="var">s</span> <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sum</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> =&gt; <span class="id" title="var">sum</span> (<span class="id" title="var">subProcTerm</span> <span class="id" title="var">s</span> <span class="id" title="var">t1</span>) (<span class="id" title="var">subProcTerm</span> <span class="id" title="var">s</span> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">parComp</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> =&gt; <span class="id" title="var">parComp</span> (<span class="id" title="var">subProcTerm</span> <span class="id" title="var">s</span> <span class="id" title="var">t1</span>) (<span class="id" title="var">subProcTerm</span> <span class="id" title="var">s</span> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">app</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> =&gt; <span class="id" title="var">app</span> <span class="id" title="var">n</span> (<span class="id" title="var">listSub</span> <span class="id" title="var">s</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">t'</span> =&gt; <span class="id" title="var">del</span> (<span class="id" title="var">subExp</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span>) (<span class="id" title="var">subProcTerm</span> <span class="id" title="var">s</span> <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
An action is either discrete or timed.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">Act</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">actDisc</span> :&gt; <span class="id" title="var">DiscAct</span> -&gt; <span class="id" title="var">Act</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">actTime</span> :&gt; <span class="id" title="var">Delay</span> -&gt; <span class="id" title="var">Act</span>.<br/>

<br/>
</div>

<div class="doc">
The duration of an action. A discrete action has duration 0,
while a delay has a duration equal to the amount of the delay.
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">durationSoft</span> (<span class="id" title="var">a</span> : <span class="id" title="var">Act</span>) : <span class="id" title="keyword">Time</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">a</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">actDisc</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">zeroTime</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">actTime</span> <span class="id" title="var">d</span> =&gt; <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The discrete action semantics over process terms. The triple p d q is a member
of this relation iff the process p can perform the discrete action d and evolve
to the process q.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">stepDiscProc</span> : <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">DiscAct</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpLists</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l1</span> <span class="id" title="var">p</span>) (<span class="id" title="var">outAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l2</span>) <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;</div>

<div class="doc">
If the list of base values l1 matches the list of variables l2 in length, then
    it can be input across the channel in question, and the resulting term is the
    guraded term with all occurences of variables in the list l2 replaced by their
    base value counterparts in l1.
</div>
<div class="code">
&nbsp;&nbsp;| <span class="id" title="var">stepDpIn</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l1</span> = <span class="id" title="var">length</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l2</span> <span class="id" title="var">p</span>) (<span class="id" title="var">inAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">l2</span> (<span class="id" title="var">listBaselistExp</span> <span class="id" title="var">l1</span>)) <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpThen</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span> = <span class="id" title="var">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">ifThen</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpChoiceL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">sum</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpChoiceR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpParL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) <span class="id" title="var">d</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpParR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">q</span> <span class="id" title="var">q'</span> <span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">q</span> <span class="id" title="var">d</span> <span class="id" title="var">q'</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) <span class="id" title="var">d</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p</span> <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpSyncLR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p</span> (<span class="id" title="var">outAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span>) <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">stepDiscProc</span> <span class="id" title="var">q</span> (<span class="id" title="var">inAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span>) <span class="id" title="var">q'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) <span class="id" title="var">tauAct</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpSyncRL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p</span> (<span class="id" title="var">inAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span>) <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">stepDiscProc</span> <span class="id" title="var">q</span> (<span class="id" title="var">outAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span>) <span class="id" title="var">q'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) <span class="id" title="var">tauAct</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpApp</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">n</span> = <span class="id" title="var">pair</span> <span class="id" title="var">l1</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>) <span class="id" title="var">p</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">app</span> <span class="id" title="var">n</span> <span class="id" title="var">l2</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepDpTimeOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">stepDiscProc</span> (<span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span>.<br/>

<br/>
</div>

<div class="doc">
Here is some machinery that will lay the groundwork for the delay semantics and also for
certain language properties.
<div class="paragraph"> </div>

 For every delay d and term t, approximates whether or not the action a can be performed
within (but not including) d units of time by a derivative of t.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">sort</span> : <span class="id" title="var">DiscAct</span> -&gt; <span class="id" title="var">Delay</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpLists</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">sort</span> (<span class="id" title="var">outAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l2</span>) <span class="id" title="var">d</span> (<span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l1</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortIn</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>), <span class="id" title="var">length</span> <span class="id" title="var">l1</span> = <span class="id" title="var">length</span> <span class="id" title="var">l2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sort</span> (<span class="id" title="var">inAct</span> <span class="id" title="var">c</span> <span class="id" title="var">l2</span>) <span class="id" title="var">d</span> (<span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l1</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortThen</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalBoolExp</span> <span class="id" title="var">b</span> <span class="id" title="var">true</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">ifThen</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortSumL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p1</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">sum</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortSumR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p2</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">sum</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortParCompL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p1</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortParCompR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p2</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortApp</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">n</span> = <span class="id" title="var">pair</span> <span class="id" title="var">l1</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>) <span class="id" title="var">p</span>) -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">app</span> <span class="id" title="var">n</span> <span class="id" title="var">l2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">sortDel</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">Time</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">t</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> (<span class="id" title="var">addDelayTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span>) (<span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
A process p is discrete action enabled for the discrete action a iff
there is some process p' such that p transitions to p' via a.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">dae</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>, <span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R_scope</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
The timed action semantics over processes.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">stepTimedProc</span> : <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">Delay</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpNil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>, <span class="id" title="var">stepTimedProc</span> <span class="id" title="var">nilProc</span> <span class="id" title="var">d</span> <span class="id" title="var">nilProc</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> (<span class="id" title="var">outPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpIn</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> (<span class="id" title="var">inPrefix</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpIfTrue</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>  = <span class="id" title="var">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">ifThen</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpIfFalse</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">ifThen</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> (<span class="id" title="var">ifThen</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpSum</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p1'</span> <span class="id" title="var">p2'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span> <span class="id" title="var">p1'</span> -&gt; <span class="id" title="var">stepTimedProc</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span> <span class="id" title="var">p2'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">sum</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>) <span class="id" title="var">d</span> (<span class="id" title="var">sum</span> <span class="id" title="var">p1'</span> <span class="id" title="var">p2'</span>)<br/>
&nbsp;&nbsp;</div>

<div class="doc">
For this law we need to assert that for all actions a that can be done by
    p within d units of time, the complementary action cannot be performed by q
    within that time.
</div>
<div class="code">
&nbsp;&nbsp;| <span class="id" title="var">stepTpPar</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>: <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">stepTimedProc</span> <span class="id" title="var">q</span> <span class="id" title="var">d</span> <span class="id" title="var">q'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>, <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; ~<span class="id" title="var">sort</span> (<span class="id" title="var">a</span>^) <span class="id" title="var">d</span> <span class="id" title="var">q</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) <span class="id" title="var">d</span> (<span class="id" title="var">parComp</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpApp</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">n</span> = <span class="id" title="var">pair</span> <span class="id" title="var">l1</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>) <span class="id" title="var">p</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">app</span> <span class="id" title="var">n</span> <span class="id" title="var">l2</span>) <span class="id" title="var">d</span> <span class="id" title="var">p'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpDelAdd</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">Time</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span>) (<span class="id" title="var">t</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">d</span>) <span class="id" title="var">p'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepTpDelSub</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">Time</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span> : <span class="id" title="var">d</span> &lt;= <span class="id" title="var">t</span>), <span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> (<span class="id" title="var">del</span> (<span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span> <span class="id" title="var">H</span>) <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;</div>

<div class="doc">
If the guard is ill formed, we just let the process idle.
</div>
<div class="code">
&nbsp;&nbsp;| <span class="id" title="var">stepTpDelIll</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">stepTimedProc</span> (<span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span>) <span class="id" title="var">d</span> (<span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
The mixture between the discrete and timed action semantics.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">stepProc</span> (<span class="id" title="var">t</span> : <span class="id" title="var">ProcTerm</span>) : <span class="id" title="var">Act</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">stepPDisc</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">t'</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span> <span class="id" title="var">t'</span> -&gt; <span class="id" title="var">stepProc</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span> <span class="id" title="var">t'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stepPTimed</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">t'</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">stepTimedProc</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span> <span class="id" title="var">t'</span> -&gt; <span class="id" title="var">stepProc</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span> <span class="id" title="var">t'</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p1 -PA- a -PA&gt; p2" := (<span class="id" title="var">stepDiscProc</span> <span class="id" title="var">p1</span> <span class="id" title="var">a</span> <span class="id" title="var">p2</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> &quot;p1 -PD- d -PD&gt; p2" := (<span class="id" title="var">stepTimedProc</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span> <span class="id" title="var">p2</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> &quot;p1 -P- a -P&gt; p2" := (<span class="id" title="var">stepProc</span> <span class="id" title="var">p1</span> <span class="id" title="var">a</span> <span class="id" title="var">p2</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
Two processes are related if either they are equal or if there is a transition
linking them.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">stepProcRefl</span> : <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">stprRefl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>, <span class="id" title="var">stepProcRefl</span> <span class="id" title="var">p</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">stprTrans</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">Act</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p1</span> -<span class="id" title="var">P</span>- <span class="id" title="var">a</span> -<span class="id" title="var">P</span>&gt; <span class="id" title="var">p2</span> -&gt; <span class="id" title="var">stepProcRefl</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p1 -P=&gt; p2" := (<span class="id" title="var">stepProcRefl</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
A process p is timed action enabled for the delay d iff
there is some process p' such that p transitions to p' via d.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tae</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>, <span class="id" title="var">stepTimedProc</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span>.<br/>

<br/>

<br/>

<br/>
</div>

<div class="doc">
If the left component of a sum is dae, then so is the entire sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">daeSumL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the right component of a sum is dae, then so is the entire sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">daeSumR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpChoiceR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the left component of a sum is dae, then so is the entire sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">daeParL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span>) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the right component of a sum is dae, then so is the entire sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">daeParR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span>) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpParR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the body of a process definition is discActEnabled, then so is the application.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">daeApp</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>), <span class="id" title="var">def</span> <span class="id" title="var">h</span> = (<span class="id" title="var">x</span>, <span class="id" title="var">p</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepDpApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
More cumbersome version but it fills in the variable list x and the process p automatically by
extracting them from the process definition of p.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">daeAppAuto</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>)) <span class="id" title="var">l</span>) (<span class="id" title="var">snd</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>))) <span class="id" title="var">a</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">daeApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the then branch of an ifThen construct is discActEnabled for an action a,
and the guard evaluates to true, then the whole construct is dae by action a.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">daeThenBranch</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">evalBoolExp</span> <span class="id" title="var">b</span> <span class="id" title="var">true</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpRelFun</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If p is discActEnabled for an action a, and the guard times out,
then the whole construct is dae by action a.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">daeTimeout</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> ($&lt;<span class="id" title="var">e</span>&gt;$ <span class="id" title="var">p</span>) <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All input prefixed terms are timed action enabled on all times.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeIn</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ? <span class="id" title="var">p</span>) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All output prefixed terms are timed action enabled on all times.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ! <span class="id" title="var">p</span>) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If both components of a sum are timedActEnabled, then so is the whole sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeSum</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the body of a process definition is timedActEnabled, then so is the application.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeApp</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>), <span class="id" title="var">def</span> <span class="id" title="var">h</span> = (<span class="id" title="var">x</span>, <span class="id" title="var">p</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) <span class="id" title="var">p</span>) <span class="id" title="var">d</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepTpApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
More cumbersome version but it fills in the variable list x and the process p automatically by
extracting them from the process definition of p.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeAppAuto</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>)) <span class="id" title="var">l</span>) (<span class="id" title="var">snd</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>))) <span class="id" title="var">d</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">taeApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the then branch of an ifThen construct is timedActEnabled for an amount d,
then the whole construct can delay by this amount.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">taeThenBranch</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepTpIfFalse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
If a process p is guarded by a value that is timed out, then all actions available
to p within d are available to the guarded p within that time d.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sortTimeOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> (<span class="id" title="var">del</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">timeDelAddZeroL</span> <span class="id" title="var">d</span>). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process is enabled on a discrete action a other than tau,
then forall delays d, a is in sort d for that process.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">enabledInSort</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">a</span> &lt;&gt; <span class="id" title="var">tauAct</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>]. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">evalBoolExpTrueTot</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepDiscProc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepDiscProc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortSumR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepDiscProc</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepDiscProc</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortParCompR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepDiscProc</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">sortApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepDiscProc</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">sortTimeOut</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepDiscProc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">enabledInSort_in</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> (<span class="id" title="var">c</span> ;? <span class="id" title="var">v</span>) -&gt; <span class="id" title="var">sort</span> (<span class="id" title="var">c</span> ;? <span class="id" title="var">v</span>) <span class="id" title="var">d</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">enabledInSort_out</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> (<span class="id" title="var">c</span> ;!<span class="id" title="var">v</span>) -&gt; <span class="id" title="var">sort</span> (<span class="id" title="var">c</span> ;! <span class="id" title="var">v</span>) <span class="id" title="var">d</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If we can prove sort a d p, then the action a is either an input of some vector
or the output of some vector.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sortInOrOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">a</span> = <span class="id" title="var">c</span> ;? <span class="id" title="var">v</span> \/ <span class="id" title="var">a</span> = <span class="id" title="var">c</span> ;! <span class="id" title="var">v</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If an action is in sort d of p, then it is also in sort d + d' of p.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sortAddR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> (<span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span>) <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">sortApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">delTimeAddAssoc2</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If an action is in sort d of p, then it is also in sort d' + d of p.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sortAddL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> (<span class="id" title="var">d'</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d</span>) <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">addDelayComm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sortAddR</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If an action is in sort d of p, then it is also in sort t + d of p.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sortAddTime</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">Time</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> (<span class="id" title="var">t</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">d</span>) <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">sortApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">timeDelAddComm</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If sort a d p and d' &lt;= d, then sort a d' p.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sortLe</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d</span> &lt;= <span class="id" title="var">d'</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d'</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">RlePlusExistsL</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">mkTime</span> (<span class="id" title="var">mknonnegreal</span> <span class="id" title="var">x</span> <span class="id" title="var">H2</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">d'</span> = <span class="id" title="var">t</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">d</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortAddTime</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">evalExp_evalExpFunTime_step</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;[<span class="id" title="var">V</span> : ?<span class="id" title="var">e</span> |<span class="id" title="var">_</span>| <span class="id" title="var">baseTime</span> ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">evalExp_evalExpFunTime</span> <span class="id" title="tactic">in</span> <span class="id" title="var">V</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
If a is in sort d' of p' and p transitions to p' by d, then a is in the sort
d + d' of p.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sortDeriv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d'</span> <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> (<span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span>) <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">evalBoolExpTrueTot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">evalBoolExpTrueTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortSumR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortParCompR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">sortApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">delTimeAddAssoc2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sort_minus_guard</span> <span class="id" title="var">a</span> <span class="id" title="var">d'</span> <span class="id" title="var">d</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span> <span class="id" title="var">p</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d'</span> ($&lt;<span class="id" title="var">eBase</span> (<span class="id" title="var">baseTime</span> (<span class="id" title="var">minusTime</span> (<span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">pos</span> (<span class="id" title="var">delay</span> <span class="id" title="var">d</span>)) <span class="id" title="var">H</span>))&gt;$ <span class="id" title="var">p</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> (<span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span>) ($&lt;<span class="id" title="var">eBase</span> (<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span>)&gt;$ <span class="id" title="var">p</span>). <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evalExpFunTime_time</span> <span class="id" title="var">t</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> (<span class="id" title="var">eBase</span> (<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span>)) = <span class="id" title="var">Some</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalExpFunTime</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sort_guard_eval_eq</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">p</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> ($&lt;<span class="id" title="var">e1</span>&gt;$ <span class="id" title="var">p</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e1</span> = <span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> ($&lt;<span class="id" title="var">e2</span>&gt;$ <span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A version of sortDeriv but as an equivalence rather than an implication.
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">sortDerivEquiv</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> -&gt; (<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d'</span> <span class="id" title="var">p'</span> &lt;-&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> (<span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span>) <span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">sortDeriv</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">evalBoolExpTrueTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sortSumR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sortParCompR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">sortLe</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pos</span> (<span class="id" title="var">delay</span> <span class="id" title="var">d0</span>)) <span class="id" title="keyword">with</span> (<span class="id" title="var">d</span> + <span class="id" title="var">d'</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">cut</span> (<span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>) + <span class="id" title="var">pos</span> (<span class="id" title="var">delay</span> <span class="id" title="var">d0</span>) =<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>) + <span class="id" title="var">pos</span> (<span class="id" title="var">delay</span> <span class="id" title="var">d</span>) + <span class="id" title="var">pos</span> (<span class="id" title="var">delay</span> <span class="id" title="var">d'</span>)). <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rplus_eq_reg_l</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Rplus_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">t0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">cut</span> ((<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span>) = (<span class="id" title="var">baseTime</span> <span class="id" title="var">t0</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> = <span class="id" title="var">t0</span>). <span class="id" title="tactic">cut</span> ((<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span>) = (<span class="id" title="var">baseTime</span> <span class="id" title="var">t0</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">cut</span> (<span class="id" title="var">d'</span> = <span class="id" title="var">minusTime</span> <span class="id" title="var">t0</span> <span class="id" title="var">d</span> <span class="id" title="var">H</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">d0</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_eq_reg_l</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="var">d</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">t0</span>, <span class="id" title="var">d0</span>, <span class="id" title="var">d</span>, <span class="id" title="var">d'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">time</span>, <span class="id" title="var">delay</span>, <span class="id" title="var">delay0</span>, <span class="id" title="var">delay1</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">ring</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.Extras.LibTactics</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Sort captures at least all the actions that are available within the delay d. The converse
of this theorem is not true: sort does over-approximate.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sort_complete</span> <span class="id" title="var">d</span> <span class="id" title="var">a</span> <span class="id" title="var">p</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">a</span> &lt;&gt; <span class="id" title="var">tauAct</span> /\ (<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> \/<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d'</span> <span class="id" title="var">p'</span>, <span class="id" title="var">delay</span> <span class="id" title="var">d'</span> &lt; <span class="id" title="var">delay</span> <span class="id" title="var">d</span> /\ <span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d'</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> /\ <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p'</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;-&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span>. <span class="id" title="var">introz</span> <span class="id" title="var">U</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">andflat</span> <span class="id" title="var">L</span>. <span class="id" title="var">elimOr2</span> <span class="id" title="var">L0</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Q</span> <span class="id" title="var">into</span> <span class="id" title="var">U</span>. <span class="id" title="var">decompEx2</span> <span class="id" title="var">U</span> <span class="id" title="var">d'</span> <span class="id" title="var">p'</span> <span class="id" title="var">LD</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">andflat</span> <span class="id" title="var">U</span>. <span class="id" title="var">Rlttoplus</span> <span class="id" title="var">U</span> <span class="id" title="var">x</span> <span class="id" title="var">RL</span>. <span class="id" title="var">mkdel</span> <span class="id" title="var">x</span> <span class="id" title="var">RL0</span> <span class="id" title="var">d''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">ES</span> : (<span class="id" title="var">enabledInSort</span> <span class="id" title="var">a</span> <span class="id" title="var">d''</span>) <span class="id" title="var">U2</span> <span class="id" title="var">L</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> = <span class="id" title="var">d'</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqd''</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Rplus_comm</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">sortDeriv</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">U2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
If a parallel construct delays to another process then the resulting process is
itself a parallel construct, whose terms either match the original or are related
to the original via a single transition.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">parStructPres</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">Act</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> -<span class="id" title="var">P</span>- <span class="id" title="var">a</span> -<span class="id" title="var">P</span>&gt; <span class="id" title="var">p'</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">p1'</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">p2'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">p'</span> = <span class="id" title="var">p1'</span> $||$ <span class="id" title="var">p2'</span> /\ <span class="id" title="var">p1</span> -<span class="id" title="var">P</span>=&gt; <span class="id" title="var">p1'</span> /\ <span class="id" title="var">p2</span> -<span class="id" title="var">P</span>=&gt; <span class="id" title="var">p2'</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">p'1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">p'2</span>; (<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span> | ]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">eapply</span> <span class="id" title="var">stprTrans</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">stepPDisc</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span> | <span class="id" title="tactic">eapply</span> <span class="id" title="var">stprRefl</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">eapply</span> <span class="id" title="var">stprRefl</span> |<span class="id" title="tactic">eapply</span> <span class="id" title="var">stprTrans</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">stepPDisc</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">stprTrans</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">stepPDisc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">stprTrans</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">stepPDisc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">stprTrans</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">stepPTimed</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Parallel structural preservation for the reflexive transition relation.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">parStructPres2</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> -<span class="id" title="var">P</span>=&gt; <span class="id" title="var">p'</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">p1'</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">p2'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">p'</span> = <span class="id" title="var">p1'</span> $||$ <span class="id" title="var">p2'</span> /\ <span class="id" title="var">p1</span> -<span class="id" title="var">P</span>=&gt; <span class="id" title="var">p1'</span> /\ <span class="id" title="var">p2</span> -<span class="id" title="var">P</span>=&gt; <span class="id" title="var">p2'</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">p1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">p2</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">parStructPres</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Whenever a process p can do a silent action, it cannot do a delay.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">maximalProgressProc</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">tauAct</span> -&gt; ~<span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">tauAct</span> <span class="id" title="keyword">as</span> <span class="id" title="var">a</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHstepDiscProc</span> <span class="id" title="var">Heqa</span> <span class="id" title="var">d0</span>));<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqa</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">cut</span> (<span class="id" title="var">true</span> = <span class="id" title="var">false</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">evalBoolExpUnique</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">evalBoolExpTrueTot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">sort</span> (<span class="id" title="var">c</span> ;! <span class="id" title="var">l</span>) <span class="id" title="var">d</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0_</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0_0</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">sort</span> (<span class="id" title="var">c</span> ;? <span class="id" title="var">l</span>) <span class="id" title="var">d</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0_</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0_0</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H15</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H16</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHstepDiscProc</span> <span class="id" title="var">Heqa</span> <span class="id" title="var">d1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
</div>

<div class="doc">
In this case, we show a contradiction because the guard is assumed both
  to be greater than the delay d and also to have timed out to 0.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span> = <span class="id" title="var">baseTime</span> <span class="id" title="var">zeroTime</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Rlt_irrefl</span> <span class="id" title="var">zeroTime</span>). <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H11</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le_trans</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r2</span> := <span class="id" title="var">d0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cond_pos</span>. <span class="id" title="tactic">assumption</span>.<br/>
</div>

<div class="doc">
Contradiction: Guard timed out but also ill formed.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process p can delay by d'' to become p'', and there is some d, d' such
that d'' = d + d', then there is some p' such that p can delay by d to get to p',
and p' can delay by d' to p''.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">timeSplit</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p''</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> <span class="id" title="var">d''</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d''</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p''</span> -&gt; <span class="id" title="var">d''</span> = <span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">p'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> /\ <span class="id" title="var">p'</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d'</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p''</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">d'</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">nilProc</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ !<span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ? <span class="id" title="var">p</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHstepTimedProc</span> <span class="id" title="var">d0</span> <span class="id" title="var">d'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">stepTpIfFalse</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHstepTimedProc1</span> <span class="id" title="var">d0</span> <span class="id" title="var">d'</span> <span class="id" title="var">H1</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHstepTimedProc2</span> <span class="id" title="var">d0</span> <span class="id" title="var">d'</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H4</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> $+$ <span class="id" title="var">x0</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHstepTimedProc1</span> <span class="id" title="var">d0</span> <span class="id" title="var">d'</span> <span class="id" title="var">H2</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHstepTimedProc2</span> <span class="id" title="var">d0</span> <span class="id" title="var">d'</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H4</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H5</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> $||$ <span class="id" title="var">x0</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortAddR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortAddR</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortDeriv</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">d</span> := <span class="id" title="var">d0</span>) (<span class="id" title="var">p</span> := <span class="id" title="var">p</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">sortDeriv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHstepTimedProc</span> <span class="id" title="var">d0</span> <span class="id" title="var">d'</span> <span class="id" title="var">H1</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHstepTimedProc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepTpApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_dec</span> <span class="id" title="var">d0</span> <span class="id" title="var">t</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
</div>

<div class="doc">
Case d0 &lt;= t, then we can proceed via del sub.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> ($&lt; <span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d0</span> <span class="id" title="var">H3</span> &gt;$ <span class="id" title="var">p</span>). <span class="id" title="tactic">split</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">d'</span> = <span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d0</span> <span class="id" title="var">H3</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">d</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span>, <span class="id" title="var">d'</span>, <span class="id" title="var">t</span>, <span class="id" title="var">d0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">delay</span>, <span class="id" title="var">time</span>, <span class="id" title="var">delay0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">addDelay</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">addDelayTime</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">pos0</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">delay1</span> + <span class="id" title="var">pos0</span> - <span class="id" title="var">delay1</span>). <span class="id" title="tactic">replace</span> (<span class="id" title="var">nonneg</span> - <span class="id" title="var">delay1</span> + <span class="id" title="var">pos</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">nonneg</span> + <span class="id" title="var">pos</span> - <span class="id" title="var">delay1</span>). <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">ring</span>. <span class="id" title="tactic">ring</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">constructor</span>.<br/>
</div>

<div class="doc">
Case t &lt; d0, then we split the delay d into (d0 - t) and d', and we proceed
  via the induction hypothesis and delAdd.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> = (<span class="id" title="var">minusDelay</span> <span class="id" title="var">d0</span> <span class="id" title="var">t</span> <span class="id" title="var">H3</span>) +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span>, <span class="id" title="var">d0</span>, <span class="id" title="var">t</span>, <span class="id" title="var">d'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">delay</span>, <span class="id" title="var">time</span>, <span class="id" title="var">delay0</span>, <span class="id" title="var">delay1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">addDelay</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">replace</span> <span class="id" title="var">pos</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">nonneg</span> + <span class="id" title="var">pos</span> - <span class="id" title="var">nonneg</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">ring</span>. <span class="id" title="tactic">replace</span> (<span class="id" title="var">pos0</span> - <span class="id" title="var">nonneg</span> + <span class="id" title="var">pos1</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">pos0</span> + <span class="id" title="var">pos1</span> - <span class="id" title="var">nonneg</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">minusDelay</span> <span class="id" title="var">d0</span> <span class="id" title="var">t</span> <span class="id" title="var">H3</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHstepTimedProc</span> <span class="id" title="var">x</span> <span class="id" title="var">d'</span> <span class="id" title="var">H2</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d0</span> = <span class="id" title="var">t</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">x</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqx</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">minusDelayAddTime</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
</div>

<div class="doc">
Now we do the case where the entire delay is less than the guard, in which case
  we can proceed via delSub twice.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">d0</span> &lt; <span class="id" title="var">t</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le_trans</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r2</span> := <span class="id" title="var">d</span>). <span class="id" title="tactic">replace</span> (<span class="id" title="var">pos</span> <span class="id" title="var">d0</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">d0</span> + 0);<br/>
&nbsp;&nbsp;[|<span class="id" title="tactic">ring</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_le_lt_compat</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cond_pos</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. &nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exists</span> ($&lt; <span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d0</span> <span class="id" title="var">H2</span> &gt;$ <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">d'</span> &lt;= <span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d0</span> <span class="id" title="var">H2</span>). <span class="id" title="tactic">assert</span> (<span class="id" title="var">pos</span> <span class="id" title="var">d'</span> = <span class="id" title="var">d</span> - <span class="id" title="var">d0</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">ring</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_le_compat</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span> <span class="id" title="var">H</span> = (<span class="id" title="var">minusTime</span> (<span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d0</span> <span class="id" title="var">H2</span>) <span class="id" title="var">d'</span> <span class="id" title="var">H3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">timeEqR</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">ring</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">exists</span> ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">stepTpDelIll</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If p can delay by d, then p can delay by any d' strictly less than d.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">delShortenStrict</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">d'</span> &lt; <span class="id" title="var">d</span> -&gt; <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">RltPlusExistsR</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">mkDelay</span> (<span class="id" title="var">mkposreal</span> <span class="id" title="var">x</span> <span class="id" title="var">H2</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">d''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> = <span class="id" title="var">d'</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d''</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">addRaddDel</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqd''</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">timeSplit</span> <span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">d'</span> <span class="id" title="var">d''</span> <span class="id" title="var">d</span> <span class="id" title="var">H3</span> <span class="id" title="var">H1</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If p can delay by d, then p can delay by any d' less than or equal d.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">delShorten</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">d'</span> &lt;= <span class="id" title="var">d</span> -&gt; <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d'</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_lt_or_eq_dec</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">delShortenStrict</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d'</span> = <span class="id" title="var">d</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeSumEx</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) : (<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span>) -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>) <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">taeSum</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">delShorten</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Rlt_le</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">taeSum</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">delShorten</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process can delay to another process, then all discrete actions available
to the original process are available to the derivative.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">persistence</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p'</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumL</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">daeParL</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">daeParR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">sort</span> (<span class="id" title="var">c</span>;! <span class="id" title="var">l</span>) <span class="id" title="var">d</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">sort</span> (<span class="id" title="var">c</span>;? <span class="id" title="var">l</span>) <span class="id" title="var">d</span> <span class="id" title="var">q</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H2</span> (<span class="id" title="var">c</span>;! <span class="id" title="var">l</span>) <span class="id" title="var">H3</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">sort</span> (<span class="id" title="var">c</span>;! <span class="id" title="var">l</span>) <span class="id" title="var">d</span> <span class="id" title="var">q</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">sort</span> (<span class="id" title="var">c</span>;? <span class="id" title="var">l</span>) <span class="id" title="var">d</span> <span class="id" title="var">p</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H2</span> (<span class="id" title="var">c</span>;? <span class="id" title="var">l</span>) <span class="id" title="var">H9</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">discActEnabled</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span> = <span class="id" title="var">zeroTime</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H9</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rlt_not_le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">cond_pos</span> <span class="id" title="var">d</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process p can delay by d'' to become p'', then there is some p', d, d' such
that d'' = d + d' and p can delay by d to get to p' and p' can delay by d' to p''.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">timeSplitEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">p''</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d''</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d''</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p''</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">p'</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">d'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">d''</span> = <span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span> /\ <span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> /\ <span class="id" title="var">p'</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d'</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p''</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">addDelayExists</span> <span class="id" title="var">d''</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">d'</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">timeSplit</span> <span class="id" title="var">p</span> <span class="id" title="var">p''</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span> <span class="id" title="var">d''</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">d'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a guarded process can delay by d, and the guard evaluates to some t, then
the guarded construct can delay by that same d.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeDelWf</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">Time</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">t</span> -&gt; <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">timedActEnabled</span> ($&lt;<span class="id" title="var">e</span>&gt;$ <span class="id" title="var">p</span>) <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_dec</span> <span class="id" title="var">d</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tae</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">p'</span> := $&lt; <span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span> <span class="id" title="var">H2</span> &gt;$ <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">minusDelayAddTime</span> <span class="id" title="var">d</span> <span class="id" title="var">t</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">tae</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">delShorten</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">d'</span> := <span class="id" title="var">minusDelay</span> <span class="id" title="var">d</span> <span class="id" title="var">t</span> <span class="id" title="var">H2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">cut</span> (<span class="id" title="var">minusDelay</span> <span class="id" title="var">d</span> <span class="id" title="var">t</span> <span class="id" title="var">H2</span> &lt;= <span class="id" title="var">t</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">minusDelay</span> <span class="id" title="var">d</span> <span class="id" title="var">t</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">Rplus_le_tac</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">timeNonneg</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the guarded process in a delay guard construct is enabled on d, then so is
the entire construct. We prove this by a case analysis on the well formedness of the
evaluation of the guard expression. If it is well formed, then it evaluates to some t,
and so we can apply taeDelWf. Otherwise, we can simply apply the constructor for ill
formed delay guarded processes.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">taeDel</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">timedActEnabled</span> ($&lt;<span class="id" title="var">e</span>&gt;$ <span class="id" title="var">p</span>) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>. <span class="id" title="var">lets</span> <span class="id" title="var">LDT</span> : (<span class="id" title="var">Rle_or_lt</span> <span class="id" title="var">d</span> <span class="id" title="var">t</span>). <span class="id" title="var">or_flat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tae</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">p'</span> := ($&lt; <span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span> <span class="id" title="var">OR</span> &gt;$ <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">RltPlusExistsR</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OR0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ex_flat</span>. <span class="id" title="var">and_flat</span>. <span class="id" title="var">mkdel</span> <span class="id" title="var">x</span> <span class="id" title="var">AND0</span> <span class="id" title="var">d'</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d'</span> &lt;= <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">AND</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqd'</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">Rplus_le_tac</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">timeNonneg</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">delShorten</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;[ | <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> = <span class="id" title="var">t</span> +<span class="id" title="var">dt</span>+ <span class="id" title="var">d'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqd'</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">AND</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepTpDelAdd</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepTpDelIll</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A single step of the full automation tactic for "eventually discrete guarded sum" terms.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">taeAutoSing</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="var">timedActEnabled</span> ?<span class="id" title="var">P</span> <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ? <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">taeIn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ! <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">taeOut</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&gt; <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">taeThenBranch</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $+$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">taeSum</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $(<span class="id" title="var">_</span>)$  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">taeAppAuto</span>; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| $&lt; <span class="id" title="var">_</span> &gt;$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">taeDel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A tactic that will automatically prove that certain processes are time
action enabled. It does this by repeatedly drilling into the process until it finds
either input or output prefixed terms, at which point the delay proof is simple.
Obviously, this will only work for a certain class of processes that are, let's say
"eventually discrete guarded sums" i.e. if they were put in some sort of normal form,
with all the applications expanded to their definitions, then they would be sums of
input or output prefixed terms.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">taeAuto</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="var">taeAutoSing</span>.<br/>

<br/>
</div>

<div class="doc">
Every application of a name to a vector can progress by a delay. To prove this
we need to use heavy automation tactics rather than step through all 30 names
individually. The automation tactic we use is taeAuto.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">delApp</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>). <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;</div>

<div class="doc">
This next block of code replaces the application of a name to a generic list of
  expressions with the body instantiated with a normalised generic list of expressions.
  By normalisation what is meant here is that the length of the target list matches the
  length of the parameter list in the definition. This is possible due to previous results.
</div>
<div class="code">
&nbsp;&nbsp;(<span class="id" title="tactic">eapply</span> <span class="id" title="var">taeApp</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>|]; <span class="id" title="var">addHyp</span> (<span class="id" title="var">listSubNormal</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>); <span class="id" title="tactic">rename</span> <span class="id" title="var">X</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqe</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">listGen</span> <span class="id" title="var">H</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">taeAuto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;t %; p" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
minGuard t P roughly says that t is less than or equal to the smallest delay
guard encountered in an expansion of P- by expansion of P what is meant is a recursive
drilling into unguarded terms until the resulting process contains only guarded terms.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">minGuard</span> : <span class="id" title="var">Delay</span> -&gt; <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgNil</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>), <span class="id" title="var">d</span> %; <span class="id" title="var">nilProc</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">mgIn</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>), <span class="id" title="var">d</span> %; (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ? <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>), <span class="id" title="var">d</span> %; (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ! <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgIfTrue</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">d</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">evalBoolExp</span> <span class="id" title="var">b</span> <span class="id" title="var">true</span> -&gt; <span class="id" title="var">d</span> %; (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgIfFalse</span> :  <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">d</span> %; (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgSumL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d1</span> <span class="id" title="var">d2</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">d1</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d2</span> %; <span class="id" title="var">q</span> -&gt; <span class="id" title="var">d1</span> &lt;= <span class="id" title="var">d2</span> -&gt; <span class="id" title="var">d1</span> %; (<span class="id" title="var">p</span> $+$ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgSumR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d1</span> <span class="id" title="var">d2</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">d1</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d2</span> %; <span class="id" title="var">q</span> -&gt; <span class="id" title="var">d2</span> &lt; <span class="id" title="var">d1</span> -&gt; <span class="id" title="var">d2</span> %; (<span class="id" title="var">p</span> $+$ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgParL</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d1</span> <span class="id" title="var">d2</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">d1</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d2</span> %; <span class="id" title="var">q</span> -&gt; <span class="id" title="var">d1</span> &lt;= <span class="id" title="var">d2</span> -&gt; <span class="id" title="var">d1</span> %; (<span class="id" title="var">p</span> $||$ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgParR</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d1</span> <span class="id" title="var">d2</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">d1</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d2</span> %; <span class="id" title="var">q</span> -&gt; <span class="id" title="var">d2</span> &lt; <span class="id" title="var">d1</span> -&gt; <span class="id" title="var">d2</span> %; (<span class="id" title="var">p</span> $||$ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgApp</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l1</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">h</span> = <span class="id" title="var">pair</span> <span class="id" title="var">l1</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d</span> %; (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>) <span class="id" title="var">p</span>) -&gt; <span class="id" title="var">d</span> %; (<span class="id" title="var">h</span> $(<span class="id" title="var">l2</span>)$)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgDelEval</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">Time</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">t</span> -&gt; <span class="id" title="var">d</span> &lt;= <span class="id" title="var">t</span> -&gt; <span class="id" title="var">d</span> %; ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgDelIll</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">d</span> %; ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">mgDelTimeout</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">d</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d</span> %; ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">where</span> &quot;d %; p" := (<span class="id" title="var">minGuard</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
If t2 is minGuard p, then all t1 &lt;= t2 are also minGuard p. Follows by induction, the only
"interesting" case being mgDelEval, in which case we use the transitivity of the Rle relation to
prove this property.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">minGuardLe</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">d1</span> <span class="id" title="var">d2</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">d2</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d1</span> &lt;= <span class="id" title="var">d2</span> -&gt; <span class="id" title="var">d1</span> %; <span class="id" title="var">p</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHminGuard</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHminGuard1</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgSumL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_trans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHminGuard2</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgSumR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_lt_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHminGuard1</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgParL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_trans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHminGuard2</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgParR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_lt_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">IHminGuard</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">mgDelEval</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHminGuard</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">mgDelTimeout</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If we can show that minGuard d p, then for all actions, sort a d p implies
p being able to actually perform the action a now.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sortMinGuard1</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">d</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H5</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpRelFun</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpRelFun</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> %; <span class="id" title="var">p1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">minGuardLe</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> %; <span class="id" title="var">p2</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">minGuardLe</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpChoiceR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H5</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpChoiceR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> %; <span class="id" title="var">p1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">minGuardLe</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> %; <span class="id" title="var">p2</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">minGuardLe</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpParR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H5</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpParR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">IHsort</span> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepDpApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">cut</span> (<span class="id" title="var">t</span> = <span class="id" title="var">t0</span>). <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_le_swap_ll</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_not_lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>. <span class="id" title="var">Rminus_refl_simpl</span>. <span class="id" title="var">delPos</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> = <span class="id" title="var">zeroTime</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> %; <span class="id" title="var">p</span>). <span class="id" title="var">my_applys_eq</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">ring</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsort</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">econstructor</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">eassumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If we can show that minGuard d p, then for all actions, sort a d p is equivalent to
p being able to actually perform the action a now.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sortMinGuard2</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">d</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">a</span> &lt;&gt; <span class="id" title="var">tauAct</span> -&gt; (<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> &lt;-&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sortMinGuard1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">enabledInSort</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All input prefixed terms are minGuarded by any delay.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mgInEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ? <span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All output prefixed terms are minGuarded by any delay.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mgOutEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ! <span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If both components of a sum are have some minGuard, then so does the whole sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mgSumEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d1</span>, <span class="id" title="var">d1</span> %; <span class="id" title="var">p1</span>) -&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">d2</span>, <span class="id" title="var">d2</span> %; <span class="id" title="var">p2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_or_lt</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgSumL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgSumR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the body of a process definition is minGuard d, then so is the application.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mgAppEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">h</span> = (<span class="id" title="var">x</span>, <span class="id" title="var">p</span>) -&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) <span class="id" title="var">p</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$). <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgApp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
More cumbersome version but it fills in the variable list x and the process p automatically by
extracting them from the process definition of p.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mgAppAutoEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>)) <span class="id" title="var">l</span>) (<span class="id" title="var">snd</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>)))) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$). <span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgAppEx</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the then branch of an ifThen construct is minGuard for some amount d,
then the whole construct is for some amount also.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mgThenBranchEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; <span class="id" title="var">p</span>) -&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>)). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpFunRel</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">evalBoolExpFun</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">mgIfFalse</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If p has a minGuard, then so does the guarded term with p as the guarded process.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mgDelEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; <span class="id" title="var">p</span>) -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; ($&lt;<span class="id" title="var">e</span>&gt;$<span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_or_eq_dec</span> 0 <span class="id" title="var">t</span> (<span class="id" title="var">cond_nonneg</span> <span class="id" title="var">t</span>)). <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> (<span class="id" title="var">mkposreal</span> <span class="id" title="var">t</span> <span class="id" title="var">H1</span>)). <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgDelEval</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Heqo</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">mgDelTimeout</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">timeZero</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A single step of the full automation tactic for "eventually discrete guarded sum" terms.
This should prove that any such term has some minGuard.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">mgAutoSing</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="tactic">exists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span> %; ?<span class="id" title="var">P</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ? <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">mgInEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ! <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">mgOutEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&gt; <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">mgThenBranchEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $+$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">mgSumEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $(<span class="id" title="var">_</span>)$  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">mgAppAutoEx</span>; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| $&lt; <span class="id" title="var">_</span> &gt;$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">mgDelEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">mgAuto</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="var">mgAutoSing</span>.<br/>

<br/>
</div>

<div class="doc">
For every application there is some delay that is a minGuard of that application.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">minGuardExistsBody</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$). <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;</div>

<div class="doc">
This next block of code replaces the application of a name to a generic list of
  expressions with the body instantiated with a normalised generic list of expressions.
  By normalisation what is meant here is that the length of the target list matches the
  length of the parameter list in the definition. This is possible due to previous results.
</div>
<div class="code">
&nbsp;&nbsp;(<span class="id" title="tactic">eapply</span> <span class="id" title="var">mgAppEx</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>|]; <span class="id" title="var">addHyp</span> (<span class="id" title="var">listSubNormal</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">X</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqe</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">listGen</span> <span class="id" title="var">H</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>); <span class="id" title="var">mgAuto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For every application there is some delay that is a minGuard of that application.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">minGuardExists</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">d</span> %; <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>); <span class="id" title="tactic">constructor</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpFunRel</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">evalBoolExpFun</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqb0</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">mgIfFalse</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">IHp1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp2</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_or_lt</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgSumL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgSumR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp2</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_or_lt</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgParL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">mgParR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">minGuardExistsBody</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_or_eq_dec</span> 0 <span class="id" title="var">t</span> (<span class="id" title="var">cond_nonneg</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> (<span class="id" title="var">mkposreal</span> <span class="id" title="var">t</span> <span class="id" title="var">H1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">mgDelEval</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqo</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">mgDelTimeout</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">timeZero</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqo</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>); <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
An action that is involved in the sort relation is not the tau action.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sortNotTau</span> (<span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="var">a</span> &lt;&gt; <span class="id" title="var">tauAct</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortInOrOut</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The precondition for parallel delay can be replaced with a simpler precondition
as long as the delay in question is a minGuard of both components of the parallel.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">parPrecMgEquiv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">d</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d</span> %; <span class="id" title="var">q</span> -&gt; (<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>, <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; ~<span class="id" title="var">sort</span> (<span class="id" title="var">a</span>^) <span class="id" title="var">d</span> <span class="id" title="var">q</span>) &lt;-&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>, <span class="id" title="var">a</span> &lt;&gt; <span class="id" title="var">tauAct</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> -&gt; ~<span class="id" title="var">discActEnabled</span> <span class="id" title="var">q</span> (<span class="id" title="var">a</span>^))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">complementNotTau</span> <span class="id" title="var">a</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">enabledInSort</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>; [|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">enabledInSort</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>; [|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">sortNotTau</span> <span class="id" title="var">a</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> <span class="id" title="var">H2</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">sortMinGuard1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">H1</span> <span class="id" title="var">a</span> <span class="id" title="var">H3</span> <span class="id" title="var">H2</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">sortMinGuard1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>

<br/>
</div>

<div class="doc">
This is a the set of channels stamped with natural numbers. The natural number
indicates the number of arguments that will be output on that channel.
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ChanStamped</span> := (<span class="id" title="var">Channel</span> * <span class="id" title="var">nat</span>)%<span class="id" title="keyword">type</span>.<br/>

<br/>
</div>

<div class="doc">
Returns p <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">l</span></span> where def h = x, p.
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">unfoldApp</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">x</span>, <span class="id" title="var">p</span>) := <span class="id" title="var">def</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
We want a way to symbolically collect all the output actions a process can do.
For each output, we just record the channel on which it occurs and the number
of arguments output, hence the collection is symbolic rather than literal.
Combined with a similar computation for input channels, this will be used to
construct a decision procedure as to whether processes can synchronise or not.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">outListProc</span> : <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlNil</span> : <span class="id" title="var">outListProc</span> <span class="id" title="var">nilProc</span> []<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlOutEval</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) : <span class="id" title="var">evalExpLists</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">outListProc</span> (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ! <span class="id" title="var">p</span>) [(<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span>)]<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlOutIll</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">l'</span>, ~<span class="id" title="var">evalExpLists</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) -&gt; <span class="id" title="var">outListProc</span> (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ! <span class="id" title="var">p</span>) []<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlIn</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">outListProc</span> (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ? <span class="id" title="var">p</span>) []<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlIfTrue</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalBoolExp</span> <span class="id" title="var">b</span> <span class="id" title="var">true</span> -&gt; <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">outListProc</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">outlIfFalse</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">outListProc</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) []<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlSum</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">outListProc</span> <span class="id" title="var">q</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">outListProc</span> (<span class="id" title="var">p</span> $+$ <span class="id" title="var">q</span>) (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlPar</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">outListProc</span> <span class="id" title="var">q</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">outListProc</span> (<span class="id" title="var">p</span> $||$ <span class="id" title="var">q</span>) (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">outlApp</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">outListProc</span> (<span class="id" title="var">unfoldApp</span> <span class="id" title="var">h</span> <span class="id" title="var">l</span>) <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">outListProc</span> (<span class="id" title="var">h</span> $( <span class="id" title="var">l</span> )$) <span class="id" title="var">l'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">outlDelTimeout</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">outListProc</span> ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>) <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">outlDelGuard</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> &lt;&gt; <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">outListProc</span> ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>) [].<br/>

<br/>
</div>

<div class="doc">
We want a way to symbolically collect all the input actions a process can do.
For each input, we just record the channel on which it occurs and the number
of arguments input, hence the collection is symbolic rather than literal.
Combined with a similar computation for output channels, this will be used to
construct a decision procedure as to whether processes can synchronise or not.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">inListProc</span> : <span class="id" title="var">ProcTerm</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">inlNil</span> : <span class="id" title="var">inListProc</span> <span class="id" title="var">nilProc</span> []<br/>
&nbsp;&nbsp;| <span class="id" title="var">inlOut</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inListProc</span> (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ! <span class="id" title="var">p</span>) []<br/>
&nbsp;&nbsp;| <span class="id" title="var">inlIn</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inListProc</span> (<span class="id" title="var">c</span> $&lt; <span class="id" title="var">l</span> &gt;$ ? <span class="id" title="var">p</span>) [(<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span>)]<br/>
&nbsp;&nbsp;| <span class="id" title="var">inlIfTrue</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalBoolExp</span> <span class="id" title="var">b</span> <span class="id" title="var">true</span> -&gt; <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">inListProc</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">inlIfFalse</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>  = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">inListProc</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) []<br/>
&nbsp;&nbsp;| <span class="id" title="var">inlSum</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">inListProc</span> <span class="id" title="var">q</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">inListProc</span> (<span class="id" title="var">p</span> $+$ <span class="id" title="var">q</span>) (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">inlPar</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">inListProc</span> <span class="id" title="var">q</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">inListProc</span> (<span class="id" title="var">p</span> $||$ <span class="id" title="var">q</span>) (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">inlApp</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inListProc</span> (<span class="id" title="var">unfoldApp</span> <span class="id" title="var">h</span> <span class="id" title="var">l</span>) <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">inListProc</span> (<span class="id" title="var">h</span> $( <span class="id" title="var">l</span> )$) <span class="id" title="var">l'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">inlDelTimeout</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> = <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">inListProc</span> ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>) <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">inlDelGuard</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span> &lt;&gt; <span class="id" title="var">Some</span> <span class="id" title="var">zeroTime</span> -&gt; <span class="id" title="var">inListProc</span> ($&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span>) [].<br/>

<br/>
</div>

<div class="doc">
If l and l' are both out lists of p, then l is equal to l'.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">outListUnique</span> (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">l</span> = <span class="id" title="var">l'</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">l'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; [|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHoutListProc</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpTrueTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpTrueTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHoutListProc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If l and l' are both out lists of p, then l is equal to l'.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">inListUnique</span> (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">l</span> = <span class="id" title="var">l'</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">l'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHinListProc</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpTrueTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; [|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpTrueTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHinListProc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">chanStampedNil</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> := [].<br/>
</div>

<div class="doc">
All output prefixed terms have an associated output list.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">outListInEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ? <span class="id" title="var">p</span>) <span class="id" title="var">l'</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All output prefixed terms have an associated output list.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">outListOutEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{ <span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> |<span class="id" title="var">outListProc</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ! <span class="id" title="var">p</span>) <span class="id" title="var">l'</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">evalExpListsExDec</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">X</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">exists</span> [(<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span>)]. <span class="id" title="tactic">eapply</span> <span class="id" title="var">outlOutEval</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlOutIll</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If both components of a sum have some output list, then so does the whole sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">outListSumEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l1</span> | <span class="id" title="var">outListProc</span> <span class="id" title="var">p1</span> <span class="id" title="var">l1</span>} -&gt; {<span class="id" title="var">l2</span> | <span class="id" title="var">outListProc</span> <span class="id" title="var">p2</span> <span class="id" title="var">l2</span>} -&gt;<br/>
&nbsp;&nbsp;{<span class="id" title="var">l</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>) <span class="id" title="var">l</span>}. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> ++ <span class="id" title="var">x0</span>). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the body of a process definition has an output list, then so does the application.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">outListAppIndEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">h</span> = (<span class="id" title="var">x</span>, <span class="id" title="var">p</span>) -&gt; {<span class="id" title="var">l'</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) <span class="id" title="var">p</span>) <span class="id" title="var">l'</span>} -&gt;<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">l'</span>}. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">unfoldApp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
More cumbersome version but it fills in the variable list x and the
process p automatically by extracting them from the process definition of p.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">outListAppAutoEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>)) <span class="id" title="var">l</span>) (<span class="id" title="var">snd</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>))) <span class="id" title="var">l'</span>} -&gt;<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">l'</span>}. <span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">outListAppIndEx</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the then branch of an ifThen construct has some outListProc,
then the whole construct has one also.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">outListThenBranchEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l</span> | <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span>} -&gt; {<span class="id" title="var">l</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) <span class="id" title="var">l</span>}. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>;[|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpFunRel</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">evalBoolExpFun</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlIfFalse</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If p has an output list, then so does the guarded term with p as
the guarded process.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">outListDelEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l</span> | <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span>} -&gt; {<span class="id" title="var">l</span> | <span class="id" title="var">outListProc</span> ($&lt;<span class="id" title="var">e</span>&gt;$<span class="id" title="var">p</span>) <span class="id" title="var">l</span>}. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecTime</span> <span class="id" title="var">t</span> <span class="id" title="var">zeroTime</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlDelGuard</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlDelGuard</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A single step of the full automation tactic for "eventually discrete guarded sum" terms.
This should prove that any such term has some minGuard.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">outListAutoSing</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- {<span class="id" title="var">_</span> | <span class="id" title="var">outListProc</span> ?<span class="id" title="var">P</span> <span class="id" title="var">_</span>}] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ? <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">outListInEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ! <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">outListOutEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&gt; <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">outListThenBranchEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $+$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">outListSumEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $(<span class="id" title="var">_</span>)$  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">outListAppAutoEx</span>; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| $&lt; <span class="id" title="var">_</span> &gt;$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">outListDelEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">outListAuto</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="var">outListAutoSing</span>.<br/>

<br/>
</div>

<div class="doc">
Every application term has a list of output actions. This result relies on the
specifics of the definition relation we have defined.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">outListAppEx</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) :<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> | <span class="id" title="var">outListProc</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">l'</span>}. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;</div>

<div class="doc">
This next block of code replaces the application of a name to a generic list of
  expressions with the body instantiated with a normalised generic list of expressions.
  By normalisation what is meant here is that the length of the target list matches the
  length of the parameter list in the definition. This is possible due to previous results.
</div>
<div class="code">
&nbsp;&nbsp;(<span class="id" title="tactic">eapply</span> <span class="id" title="var">outListAppIndEx</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>|]; <span class="id" title="var">addHyp</span> (<span class="id" title="var">listSubNormal</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">X</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqe</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">listGen</span> <span class="id" title="var">H</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>); <span class="id" title="var">outListAuto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For every process there is a list of output actions for that process.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">outListEx</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) : {<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> | <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>; <span class="id" title="tactic">constructor</span>]. <span class="id" title="var">addHyp</span> (<span class="id" title="var">evalExpListsExDec</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">X</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">exists</span> [(<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span>)]. <span class="id" title="tactic">eapply</span> <span class="id" title="var">outlOutEval</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlOutIll</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpFunRel</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">evalBoolExpFun</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqb0</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlIfFalse</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">IHp1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp2</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> ++ <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">IHp1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp2</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> ++ <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outListAppEx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecTime</span> <span class="id" title="var">t</span> <span class="id" title="var">zeroTime</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlDelGuard</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">outlDelGuard</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All input prefixed terms have an associated input list.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inListInEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ? <span class="id" title="var">p</span>) <span class="id" title="var">l'</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> [(<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span>)]. <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All input prefixed terms have an associated input list.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inListOutEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{ <span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> |<span class="id" title="var">inListProc</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ! <span class="id" title="var">p</span>) <span class="id" title="var">l'</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If both components of a sum have some input list, then so does the whole sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inListSumEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l1</span> | <span class="id" title="var">inListProc</span> <span class="id" title="var">p1</span> <span class="id" title="var">l1</span>} -&gt; {<span class="id" title="var">l2</span> | <span class="id" title="var">inListProc</span> <span class="id" title="var">p2</span> <span class="id" title="var">l2</span>} -&gt;<br/>
&nbsp;&nbsp;{<span class="id" title="var">l</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>) <span class="id" title="var">l</span>}. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> ++ <span class="id" title="var">x0</span>). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the body of a process definition has an input list, then so does the application.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inListAppIndEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">h</span> = (<span class="id" title="var">x</span>, <span class="id" title="var">p</span>) -&gt; {<span class="id" title="var">l'</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) <span class="id" title="var">p</span>) <span class="id" title="var">l'</span>} -&gt;<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">l'</span>}. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">unfoldApp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
More cumbersome version but it fills in the variable list x and the
process p automatically by extracting them from the process definition of p.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inListAppAutoEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>)) <span class="id" title="var">l</span>) (<span class="id" title="var">snd</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>))) <span class="id" title="var">l'</span>} -&gt;<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">l'</span>}. <span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">inListAppIndEx</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the then branch of an ifThen construct has some inListProc,
then the whole construct has one also.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inListThenBranchEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l</span> | <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span>} -&gt; {<span class="id" title="var">l</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>) <span class="id" title="var">l</span>}. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>;[|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpFunRel</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">evalBoolExpFun</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inlIfFalse</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If p has an input list, then so does the guarded term with p as
the guarded process.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inListDelEx</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;{<span class="id" title="var">l</span> | <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span>} -&gt; {<span class="id" title="var">l</span> | <span class="id" title="var">inListProc</span> ($&lt;<span class="id" title="var">e</span>&gt;$<span class="id" title="var">p</span>) <span class="id" title="var">l</span>}. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecTime</span> <span class="id" title="var">t</span> <span class="id" title="var">zeroTime</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inlDelGuard</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inlDelGuard</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A single step of the full automation tactic for "eventually discrete guarded sum" terms.
This should prove that any such term has some minGuard.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inListAutoSing</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- {<span class="id" title="var">_</span> | <span class="id" title="var">inListProc</span> ?<span class="id" title="var">P</span> <span class="id" title="var">_</span>}] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ? <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">inListInEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ! <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">inListOutEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&gt; <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">inListThenBranchEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $+$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">inListSumEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $(<span class="id" title="var">_</span>)$  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">inListAppAutoEx</span>; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| $&lt; <span class="id" title="var">_</span> &gt;$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">inListDelEx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inListAuto</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="var">inListAutoSing</span>.<br/>

<br/>
</div>

<div class="doc">
Every application term has a list of input actions. This result relies on the
specifics of the definition relation we have defined.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">inListAppEx</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) :<br/>
&nbsp;&nbsp;{<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> | <span class="id" title="var">inListProc</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$) <span class="id" title="var">l'</span>}. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;</div>

<div class="doc">
This next block of code replaces the application of a name to a generic list of
  expressions with the body instantiated with a normalised generic list of expressions.
  By normalisation what is meant here is that the length of the target list matches the
  length of the parameter list in the definition. This is possible due to previous results.
</div>
<div class="code">
&nbsp;&nbsp;(<span class="id" title="tactic">eapply</span> <span class="id" title="var">inListAppIndEx</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>|]; <span class="id" title="var">addHyp</span> (<span class="id" title="var">listSubNormal</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">X</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqe</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">listGen</span> <span class="id" title="var">H</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>); <span class="id" title="var">inListAuto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For every process there is a list of input actions for that process.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">inListEx</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) : {<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span> | <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>; <span class="id" title="tactic">constructor</span>]. <span class="id" title="tactic">exists</span> [(<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">evalBoolExpFunRel</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">evalBoolExpFun</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqb0</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inlIfFalse</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">IHp1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp2</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> ++ <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">IHp1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp2</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> ++ <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inListAppEx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecTime</span> <span class="id" title="var">t</span> <span class="id" title="var">zeroTime</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">IHp</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inlDelGuard</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">chanStampedNil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">inlDelGuard</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqo</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Equality is decidable on stamped channels.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqDecChanStamped</span> (<span class="id" title="var">c1</span> <span class="id" title="var">c2</span> : <span class="id" title="var">ChanStamped</span>) :<br/>
&nbsp;&nbsp;{<span class="id" title="var">c1</span> = <span class="id" title="var">c2</span>} + {<span class="id" title="var">c1</span> &lt;&gt; <span class="id" title="var">c2</span>}. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c1</span>, <span class="id" title="var">c2</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecChannel</span> <span class="id" title="var">c</span> <span class="id" title="var">c0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">natDec</span> <span class="id" title="var">n</span> <span class="id" title="var">n0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
It is decidable whether or not an element is in a list of stamped channels.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inChanStampedDec</span> (<span class="id" title="var">s</span> : <span class="id" title="var">ChanStamped</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>) : <br/>
&nbsp;&nbsp;{<span class="id" title="var">s</span> <span class="id" title="var">_</span>: <span class="id" title="var">l</span>} + {~<span class="id" title="var">s</span> <span class="id" title="var">_</span>: <span class="id" title="var">l</span>}. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_dec</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eqDecChanStamped</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a stamped channel is in the output list of a process, then that process is
enabled on an action that matches the stamped channel.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">outListEnabled</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) : <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; (<span class="id" title="var">c</span>, <span class="id" title="var">n</span>) <span class="id" title="var">_</span>: <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">length</span> <span class="id" title="var">v</span> = <span class="id" title="var">n</span> /\ <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> (<span class="id" title="var">c</span> ;! <span class="id" title="var">v</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">l'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">evalExpListsLength</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpOut</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeThenBranch</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_app_or</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumR</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">in_app_or</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeParL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeParR</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lx</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">daeApp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqp</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">unfoldApp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">inListEnabled</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>): <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; (<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span>: <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> (<span class="id" title="var">c</span> ;? <span class="id" title="var">v</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>]. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpIn</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeThenBranch</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_app_or</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumL</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumR</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">in_app_or</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeParL</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeParR</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lx</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">daeApp</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqp</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">unfoldApp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
An existential version of the above.
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">inListEnabledEx</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>): <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; (<span class="id" title="var">c</span>, <span class="id" title="var">n</span>) <span class="id" title="var">_</span>: <span class="id" title="var">l</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">length</span> <span class="id" title="var">v</span> = <span class="id" title="var">n</span> /\<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> (<span class="id" title="var">c</span> ;? <span class="id" title="var">v</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">baseListEx</span> <span class="id" title="var">n</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">inListEnabled</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process is enabled on an output action then there is a matching stamped
channel in the output list of that process.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">enabledOutList</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>) :  <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> (<span class="id" title="var">c</span> ;! <span class="id" title="var">v</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span>, (<span class="id" title="var">length</span> <span class="id" title="var">v</span>)) <span class="id" title="var">_</span>: <span class="id" title="var">l</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">p'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>]. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">evalExpListsLength</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">unfoldApp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHoutListProc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHoutListProc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHoutListProc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHoutListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">false</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process is enabled on an input action then there is a matching stamped
channel in the input list of that process.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">enabledInList</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="var">list</span> <span class="id" title="var">BaseType</span>) : <span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> (<span class="id" title="var">c</span> ;? <span class="id" title="var">v</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span>, (<span class="id" title="var">length</span> <span class="id" title="var">v</span>)) <span class="id" title="var">_</span>: <span class="id" title="var">l</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">p'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>]. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">in_or_app</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">unfoldApp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHinListProc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHinListProc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHinListProc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinListProc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">false</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A way of checking for no synchronisations between p and q by performing intersections
on their input/output and output/input lists and checking that they evaluate to empty lists.
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">noSync</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">nosync</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">l1'</span> <span class="id" title="var">l2'</span> : <span class="id" title="var">list</span> <span class="id" title="var">ChanStamped</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">inListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">outListProc</span> <span class="id" title="var">p</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">inListProc</span> <span class="id" title="var">q</span> <span class="id" title="var">l1'</span> -&gt; <span class="id" title="var">outListProc</span> <span class="id" title="var">q</span> <span class="id" title="var">l2'</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2'</span> = [] -&gt; <span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l2</span> <span class="id" title="var">l1'</span> = []<br/>
&nbsp;&nbsp;-&gt; <span class="id" title="var">noSync</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>.<br/>

<br/>
</div>

<div class="doc">
The no sync predicate is decidable.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">noSyncDec</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">decidable</span> (<span class="id" title="var">noSync</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEx</span> <span class="id" title="var">p</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEx</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEx</span> <span class="id" title="var">p</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEx</span> <span class="id" title="var">q</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">l1</span>, <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l3</span>, <span class="id" title="var">x1</span> <span class="id" title="var">into</span> <span class="id" title="var">l2</span>, <span class="id" title="var">x2</span> <span class="id" title="var">into</span> <span class="id" title="var">l4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l1</span> <span class="id" title="var">l4</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l2</span> <span class="id" title="var">l3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s0</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">nosync</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">replace</span> <span class="id" title="var">l5</span> <span class="id" title="keyword">with</span> <span class="id" title="var">l2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">l1'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">l3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H9</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqs0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqs0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">inListUnique</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">outListUnique</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">replace</span> <span class="id" title="var">l0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">l1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">l2'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">l4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqs</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">outListUnique</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">inListUnique</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The precondition for parallel delay can be replaced with a simpler precondition
involving the input and output lists, as long as the delay in question is a minGuard
of both components of the parallel.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">parPrecMgEquiv2</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">d</span> %; <span class="id" title="var">p</span> -&gt; <span class="id" title="var">d</span> %; <span class="id" title="var">q</span> -&gt; (<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>, <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> -&gt; ~<span class="id" title="var">sort</span> (<span class="id" title="var">a</span>^) <span class="id" title="var">d</span> <span class="id" title="var">q</span>) &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">noSync</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">parPrecMgEquiv</span>; [|<span class="id" title="tactic">assumption</span>|<span class="id" title="tactic">assumption</span>].<br/>
</div>

<div class="doc">
Left to right.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEx</span> <span class="id" title="var">p</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEx</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEx</span> <span class="id" title="var">p</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEx</span> <span class="id" title="var">q</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">l1</span>, <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l3</span>, <span class="id" title="var">x1</span> <span class="id" title="var">into</span> <span class="id" title="var">l2</span>, <span class="id" title="var">x2</span> <span class="id" title="var">into</span> <span class="id" title="var">l4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l1</span> <span class="id" title="var">l4</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l2</span> <span class="id" title="var">l3</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">nosync</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqs</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">set_In</span> <span class="id" title="var">c</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l2</span> <span class="id" title="var">l3</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqs0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> <span class="id" title="var">H6</span>. (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>). (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">set_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>, <span class="id" title="var">H7</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> <span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">p</span> <span class="id" title="var">l2</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span> <span class="id" title="var">H6</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H8</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">q</span> <span class="id" title="var">l3</span> <span class="id" title="var">x</span> <span class="id" title="var">H1</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := (<span class="id" title="var">c</span>;! <span class="id" title="var">x</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">set_In</span> <span class="id" title="var">c</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l1</span> <span class="id" title="var">l4</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqs</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> <span class="id" title="var">H6</span>. (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>). (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">set_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>, <span class="id" title="var">H7</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> <span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">q</span> <span class="id" title="var">l4</span> <span class="id" title="var">n</span> <span class="id" title="var">H3</span> <span class="id" title="var">H7</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H8</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">p</span> <span class="id" title="var">l1</span> <span class="id" title="var">x</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := (<span class="id" title="var">c</span>;? <span class="id" title="var">x</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>.<br/>
</div>

<div class="doc">
Right to left.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; [<span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span> | <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">l</span> <span class="id" title="var">into</span> <span class="id" title="var">v</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">enabledInList</span> <span class="id" title="var">c</span> <span class="id" title="var">p</span> <span class="id" title="var">l1</span> <span class="id" title="var">v</span> <span class="id" title="var">H5</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">enabledOutList</span> <span class="id" title="var">c</span> <span class="id" title="var">q</span> <span class="id" title="var">l2'</span> <span class="id" title="var">v</span> <span class="id" title="var">H8</span> <span class="id" title="var">H4</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">set_inter_intro</span> <span class="id" title="var">eqDecChanStamped</span> (<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">v</span>) <span class="id" title="var">l1</span> <span class="id" title="var">l2'</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H9</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H11</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">l</span> <span class="id" title="var">into</span> <span class="id" title="var">v</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">enabledOutList</span> <span class="id" title="var">c</span> <span class="id" title="var">p</span> <span class="id" title="var">l2</span> <span class="id" title="var">v</span> <span class="id" title="var">H6</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">enabledInList</span> <span class="id" title="var">c</span> <span class="id" title="var">q</span> <span class="id" title="var">l1'</span> <span class="id" title="var">v</span> <span class="id" title="var">H7</span> <span class="id" title="var">H4</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">set_inter_intro</span> <span class="id" title="var">eqDecChanStamped</span> (<span class="id" title="var">c</span>, <span class="id" title="var">length</span> <span class="id" title="var">v</span>) <span class="id" title="var">l2</span> <span class="id" title="var">l1'</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H10</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H11</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For any pair of processes, there is a minGuard that is common to both.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">minGuardCommon</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) : <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">d</span> %; <span class="id" title="var">p</span> /\ <span class="id" title="var">d</span> %; <span class="id" title="var">q</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">minGuardExists</span> <span class="id" title="var">p</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">minGuardExists</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">minGuardLe</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">minGuardLe</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For any pair of delay enabled processes, there is a delay that is common to both.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeCommon</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span>) -&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span> /\ <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">delShorten</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">delShorten</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process p is time act enabled on d, then it is time act enabled on
any minGuard d' of p less than d.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">taeMinGuardCommon</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span>) -&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">d</span> /\ <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">d</span> /\ <span class="id" title="var">d</span> %; <span class="id" title="var">p1</span> /\ <span class="id" title="var">d</span> %; <span class="id" title="var">p2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">taeCommon</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">minGuardCommon</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_lt_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">minGuardLe</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">d1</span> := <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">minGuardLe</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">d1</span> := <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|]). <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">delShorten</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">d'</span> := <span class="id" title="var">x0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">delShorten</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">d'</span> := <span class="id" title="var">x0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|]). <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the noSync predicate is not true, then there exists some specific synchronisation
between the component processes.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">noSyncNotExistsSync</span> (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">ProcTerm</span>) : ~<span class="id" title="var">noSync</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>, <span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> /\ <span class="id" title="var">discActEnabled</span> <span class="id" title="var">q</span> (<span class="id" title="var">a</span>^).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEx</span> <span class="id" title="var">p</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEx</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEx</span> <span class="id" title="var">p</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEx</span> <span class="id" title="var">q</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">l1</span>, <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l3</span>, <span class="id" title="var">x1</span> <span class="id" title="var">into</span> <span class="id" title="var">l2</span>, <span class="id" title="var">x2</span> <span class="id" title="var">into</span> <span class="id" title="var">l4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l4</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l3</span> <span class="id" title="var">l1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s0</span>.<br/>
</div>

<div class="doc">
If both list are empty, then we get a contradiction.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">nosync</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
</div>

<div class="doc">
Otherwise we just take the head of the list as a witness.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">set_In</span> <span class="id" title="var">c</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l3</span> <span class="id" title="var">l1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqs0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> <span class="id" title="var">H0</span>. (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>). (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">set_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> <span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">p</span> <span class="id" title="var">l3</span> <span class="id" title="var">n</span> <span class="id" title="var">H1</span> <span class="id" title="var">H0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H6</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">q</span> <span class="id" title="var">l1</span> <span class="id" title="var">x</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">c</span> ;! <span class="id" title="var">x</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
</div>

<div class="doc">
And do the very same for the symmetrical case.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">set_In</span> <span class="id" title="var">c</span> (<span class="id" title="var">set_inter</span> <span class="id" title="var">eqDecChanStamped</span> <span class="id" title="var">l4</span> <span class="id" title="var">l2</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqs</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> <span class="id" title="var">H0</span>. (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>). (<span class="id" title="tactic">apply</span> <span class="id" title="var">set_inter_elim2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">set_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> <span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">outListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">q</span> <span class="id" title="var">l2</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span> <span class="id" title="var">H5</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H6</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">inListEnabled</span> <span class="id" title="var">c</span> <span class="id" title="var">p</span> <span class="id" title="var">l4</span> <span class="id" title="var">x</span> <span class="id" title="var">H3</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">c</span> ;? <span class="id" title="var">x</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Progress says that a process can either delay or perform a tau.
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="tactic">progress</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">tauAct</span> \/ <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>, <span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span>.<br/>

<br/>
</div>

<div class="doc">
All input prefixed terms can progress.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">progressIn</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ? <span class="id" title="var">p</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="tactic">progress</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All output prefixed terms can progress.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">progressOut</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">c</span> : <span class="id" title="var">Channel</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> (<span class="id" title="var">c</span> $&lt;<span class="id" title="var">l</span>&gt;$ ! <span class="id" title="var">p</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="tactic">progress</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If both components of a sum can progress, then so can the whole sum.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">progressSum</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="var">p1</span> -&gt; <span class="id" title="tactic">progress</span> <span class="id" title="var">p2</span> -&gt; <span class="id" title="tactic">progress</span> (<span class="id" title="var">p1</span> $+$ <span class="id" title="var">p2</span>). <span class="id" title="tactic">unfold</span> <span class="id" title="tactic">progress</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumL</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">daeSumR</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">taeSumEx</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the body of a process definition can progress, then so can the application.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">progressAppInd</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> : <span class="id" title="var">list</span> <span class="id" title="var">Var</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">def</span> <span class="id" title="var">h</span> = (<span class="id" title="var">x</span>, <span class="id" title="var">p</span>) -&gt; <span class="id" title="tactic">progress</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) <span class="id" title="var">p</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$). <span class="id" title="tactic">unfold</span> <span class="id" title="tactic">progress</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; [<span class="id" title="tactic">left</span>|<span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">daeApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">taeApp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
More cumbersome version but it fills in the variable list x and the
process p automatically by extracting them from the process definition of p.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">progressAppAuto</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> (<span class="id" title="var">subProcTerm</span> (<span class="id" title="var">listsToSub</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>)) <span class="id" title="var">l</span>) (<span class="id" title="var">snd</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$). <span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">progressAppInd</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the then branch of an ifThen construct can progress,
then the whole construct can also.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">progressThenBranch</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">b</span> : <span class="id" title="var">BoolExp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="tactic">progress</span> (<span class="id" title="var">b</span> $&gt; <span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalBoolExpFunTot</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">daeThenBranch</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">evalBoolExpTrueTot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">taeThenBranch</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepTpIfFalse</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">R_scope</span>.<br/>

<br/>
</div>

<div class="doc">
If p can progress, then so can the guarded term with p as
the guarded process.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">progressDel</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span> : <span class="id" title="var">Exp</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="var">p</span> -&gt; <span class="id" title="tactic">progress</span> ($&lt;<span class="id" title="var">e</span>&gt;$<span class="id" title="var">p</span>). <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">evalExpFunTime</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">eqDecTime</span> <span class="id" title="var">t</span> <span class="id" title="var">zeroTime</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqo</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>;[<span class="id" title="tactic">left</span>|<span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">taeDel</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">assert</span> (0 &lt; <span class="id" title="var">t</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">cond_nonneg</span> <span class="id" title="var">t</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_lt_or_eq_dec</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">timeZero</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">mkDelay</span> (<span class="id" title="var">mkposreal</span> <span class="id" title="var">t</span> <span class="id" title="var">H0</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">d</span> &lt;= <span class="id" title="var">t</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqd</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepTpDelSub</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">H</span> := <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqo</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepTpDelIll</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A single step of the full automation tactic for "eventually discrete guarded sum" terms.
This should prove that any such term can progress.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">progressAutoSing</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="tactic">progress</span> ?<span class="id" title="var">P</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ? <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">progressIn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&lt; <span class="id" title="var">_</span> &gt;$ ! <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">progressOut</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $&gt; <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">progressThenBranch</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $+$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">progressSum</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> $(<span class="id" title="var">_</span>)$  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">progressAppAuto</span>; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| $&lt; <span class="id" title="var">_</span> &gt;$ <span class="id" title="var">_</span>  =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="var">progressDel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">progressAuto</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="var">progressAutoSing</span>.<br/>

<br/>
</div>

<div class="doc">
Every application term can progress. This result relies on the
specifics of the definition relation we have defined, using a cheeky automation tactic.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">progressApp</span> (<span class="id" title="var">h</span> : <span class="id" title="var">Name</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">Exp</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> (<span class="id" title="var">h</span> $(<span class="id" title="var">l</span>)$). <span class="id" title="var">remember</span> (<span class="id" title="var">def</span> <span class="id" title="var">h</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqe</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">p</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;</div>

<div class="doc">
This next block of code replaces the application of a name to a generic list of
  expressions with the body instantiated with a normalised generic list of expressions.
  By normalisation what is meant here is that the length of the target list matches the
  length of the parameter list in the definition. This is possible due to previous results.
</div>
<div class="code">
&nbsp;&nbsp;(<span class="id" title="tactic">eapply</span> <span class="id" title="var">progressAppInd</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Heqe</span>|]; <span class="id" title="var">addHyp</span> (<span class="id" title="var">listSubNormal</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">X</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqe</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">listGen</span> <span class="id" title="var">H</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>); <span class="id" title="var">progressAuto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A software process can always do either a tau action or it can delay by some amount
d.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">progressSoft</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>),<br/>
&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="tactic">progress</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">right</span>; <span class="id" title="tactic">exists</span> (<span class="id" title="var">mkDelay</span> <span class="id" title="var">onePos</span>); <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>; <span class="id" title="tactic">constructor</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">progressThenBranch</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">progressSum</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">IHp1</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IHp2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">IHp1</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">IHp2</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpParR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
</div>

<div class="doc">
Special case: par- both can delay. We now do case analysis on whether or not
  p and q can synchronise.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">noSyncDec</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>; [<span class="id" title="tactic">right</span> | <span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">taeMinGuardCommon</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decompose</span> [<span class="id" title="var">and</span>] <span class="id" title="var">H3</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">tae</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">parPrecMgEquiv2</span>; <span class="id" title="tactic">assumption</span>.<br/>
</div>

<div class="doc">
Now we're at the case where they don't synchronise.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">noSyncNotExistsSync</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">stepDpSyncRL</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">stepDpSyncLR</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">stepDpParL</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">progressApp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">progressDel</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a process cannot perform a tau action, then it can delay by some amount. This is
a direct corollary of progress.
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">patienceSoft</span> (<span class="id" title="var">p</span> : <span class="id" title="var">ProcTerm</span>) : ~<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">tauAct</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">timedActEnabled</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">progressSoft</span> <span class="id" title="var">p</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">delProc_minus_guard</span> <span class="id" title="var">t</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span> <span class="id" title="var">H</span> <span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">e</span> :<br/>
&nbsp;&nbsp;$&lt; <span class="id" title="var">minusTime</span> <span class="id" title="var">t</span> (<span class="id" title="var">delay</span> <span class="id" title="var">d</span>) <span class="id" title="var">H</span> &gt;$ <span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d'</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> -&gt;<br/>
&nbsp;&nbsp;$&lt; <span class="id" title="var">e</span> &gt;$ <span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
If p can delay to p' and p' can delay to p'',
 then p can delay to p'' by the sum of the two original delays.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">delAddSoft</span> (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">p''</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> <span class="id" title="var">d'</span> : <span class="id" title="var">Delay</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p'</span> -&gt; <span class="id" title="var">p'</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d'</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p''</span> -&gt; <span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> +<span class="id" title="var">d</span>+ <span class="id" title="var">d'</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">p''</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">constructor</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepTpIfFalse</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">sortDerivEquiv</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">stepTpApp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">delTimeAddAssoc2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">stepTpDelAdd</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">delProc_minus_guard</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span> .. | ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">stepTpDelIll</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The passage of time in this universe is linear, i.e. any process can delay by an amount d to
at most one derivative process.
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">timeDeterminacySoft</span> (<span class="id" title="var">p</span> <span class="id" title="var">p1'</span> <span class="id" title="var">p2'</span> : <span class="id" title="var">ProcTerm</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">Delay</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p1'</span> -&gt; <span class="id" title="var">p</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p2'</span> -&gt; <span class="id" title="var">p1'</span> = <span class="id" title="var">p2'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">p2'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc1</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc2</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">replace</span> <span class="id" title="var">t0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_eq_reg_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">delayEqR</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstepTimedProc</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">cut</span> (<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span> = <span class="id" title="var">baseTime</span> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> = <span class="id" title="var">t0</span>). <span class="id" title="tactic">cut</span> (<span class="id" title="var">baseTime</span> <span class="id" title="var">t</span> = <span class="id" title="var">baseTime</span> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rlt_not_le</span>; [|<span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>]. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">Rplus_lt_tac</span>. <span class="id" title="var">delPos</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> = <span class="id" title="var">t0</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">false</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_le_swap_ll</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_not_lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="var">Rminus_refl_simpl</span>. <span class="id" title="var">delPos</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> = <span class="id" title="var">t0</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">proof_irrelevance</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>.. | ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">del_triple_sort</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> <span class="id" title="var">p</span> <span class="id" title="var">d</span> : <span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span> -<span class="id" title="var">PD</span>- <span class="id" title="var">d</span> -<span class="id" title="var">PD</span>&gt; <span class="id" title="var">p</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>, <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p1</span> -&gt; ~<span class="id" title="var">sort</span> (<span class="id" title="var">a</span>^) <span class="id" title="var">d</span> <span class="id" title="var">p2</span>) /\<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>, <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p1</span> -&gt; ~<span class="id" title="var">sort</span> (<span class="id" title="var">a</span>^) <span class="id" title="var">d</span> <span class="id" title="var">p3</span>) /\<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">DiscAct</span>, <span class="id" title="var">sort</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span> <span class="id" title="var">p2</span> -&gt; ~<span class="id" title="var">sort</span> (<span class="id" title="var">a</span>^) <span class="id" title="var">d</span> <span class="id" title="var">p3</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">PD</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">PD</span>. <span class="id" title="var">invertClear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">not</span>; <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">sortParCompR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parTriple_disc_intro1</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> <span class="id" title="var">p1'</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">p1</span> -<span class="id" title="var">PA</span>- <span class="id" title="var">a</span> -<span class="id" title="var">PA</span>&gt; <span class="id" title="var">p1'</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span> -<span class="id" title="var">PA</span>- <span class="id" title="var">a</span> -<span class="id" title="var">PA</span>&gt;  <span class="id" title="var">p1'</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parTriple_disc_intro2</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> <span class="id" title="var">p2'</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">p2</span> -<span class="id" title="var">PA</span>- <span class="id" title="var">a</span> -<span class="id" title="var">PA</span>&gt; <span class="id" title="var">p2'</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span> -<span class="id" title="var">PA</span>- <span class="id" title="var">a</span> -<span class="id" title="var">PA</span>&gt;  <span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2'</span> $||$ <span class="id" title="var">p3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpParR</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parTriple_disc_intro3</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> <span class="id" title="var">p3'</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">p3</span> -<span class="id" title="var">PA</span>- <span class="id" title="var">a</span> -<span class="id" title="var">PA</span>&gt; <span class="id" title="var">p3'</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span> -<span class="id" title="var">PA</span>- <span class="id" title="var">a</span> -<span class="id" title="var">PA</span>&gt;  <span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">stepDpParR</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parTriple_dae_intro1</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p1</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span>) <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">parTriple_disc_intro1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parTriple_dae_intro2</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p2</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span>) <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">parTriple_disc_intro2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parTriple_dae_intro3</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">discActEnabled</span> <span class="id" title="var">p3</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">discActEnabled</span> (<span class="id" title="var">p1</span> $||$ <span class="id" title="var">p2</span> $||$ <span class="id" title="var">p3</span>) <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">dae</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">parTriple_disc_intro3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
<hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>