<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Main</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Main</h1>

<div class="code">
</div>

<div class="doc">
This file was written by Colm Bhandal, PhD student, Foundations and Methods group,
School of Computer Science and Statistics, Trinity College, Dublin, Ireland.
<div class="paragraph"> </div>

 In this file is the main result. We could also include any other results of interest here
if time allowed it.
<div class="paragraph"> </div>

*************************** Standard Imports 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Reals</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.Extras.LibTactics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.GenTacs</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.StandardResults</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.ComhBasics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.LanguageFoundations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.SoftwareLanguage</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.InterfaceLanguage</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.ModeStateLanguage</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.EntityLanguage</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.NetworkLanguage</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.NetAuxBasics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.NetAuxDefs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.NARNonFS_currSince</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.NARMisc</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.NARIncomp</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ComhCoq.NARTop</span>.<br/>

<br/>
</div>

<div class="doc">
Used to exploit a symmetry in the following proof, essentially continues on the proof
from where it is applied
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">safety_aux</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Network</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">reachableNet</span> <span class="id" title="var">n</span>) (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span> : <span class="id" title="var">Entity</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">H</span> : (<span class="id" title="var">i</span> &lt;&gt; <span class="id" title="var">j</span>)%<span class="id" title="var">nat</span>) (<span class="id" title="var">H0</span> : <span class="id" title="var">e1</span> @ <span class="id" title="var">i</span> .: <span class="id" title="var">n</span>) (<span class="id" title="var">H1</span> : <span class="id" title="var">e2</span> @ <span class="id" title="var">j</span> .: <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> : <span class="id" title="var">Distance</span>) (<span class="id" title="var">Heqx</span> : <span class="id" title="var">x</span> = <span class="id" title="var">mkDistance</span> (<span class="id" title="var">dist2d</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>)) (<span class="id" title="var">mdc</span> : <span class="id" title="var">Distance</span>) (<span class="id" title="var">m1</span> : <span class="id" title="var">Mode</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">Heqm1</span> : <span class="id" title="var">m1</span> = <span class="id" title="var">e1</span>) (<span class="id" title="var">m2</span> : <span class="id" title="var">Mode</span>) (<span class="id" title="var">Heqm2</span> : <span class="id" title="var">m2</span> = <span class="id" title="var">e2</span>) (<span class="id" title="var">Heqmdc</span> : <span class="id" title="var">mdc</span> = <span class="id" title="var">minDistComp</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H2</span> : <span class="id" title="var">x</span> &lt; <span class="id" title="var">mdc</span>) (<span class="id" title="var">H3</span> : ~ <span class="id" title="var">failSafe</span> <span class="id" title="var">m1</span>) (<span class="id" title="var">H4</span> : ~ <span class="id" title="var">failSafe</span> <span class="id" title="var">m2</span>) (<span class="id" title="var">H5</span> : <span class="id" title="var">currModeNet</span> <span class="id" title="var">m1</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H6</span> : <span class="id" title="var">currModeNet</span> <span class="id" title="var">m2</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span>) (<span class="id" title="var">t1</span> : <span class="id" title="keyword">Time</span>) (<span class="id" title="var">H7</span> : <span class="id" title="var">currSince</span> <span class="id" title="var">m1</span> <span class="id" title="var">t1</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span>) (<span class="id" title="var">t2</span> : <span class="id" title="keyword">Time</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H8</span> : <span class="id" title="var">currSince</span> <span class="id" title="var">m2</span> <span class="id" title="var">t2</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span>) (<span class="id" title="var">H9</span> : <span class="id" title="var">msgLatency</span> + <span class="id" title="var">Rmax</span> <span class="id" title="var">adaptNotif</span> <span class="id" title="var">transMax</span> &lt; <span class="id" title="var">t1</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">H10</span> : <span class="id" title="var">msgLatency</span> + <span class="id" title="var">Rmax</span> <span class="id" title="var">adaptNotif</span> <span class="id" title="var">transMax</span> &lt; <span class="id" title="var">t2</span>) (<span class="id" title="var">H11</span> : <span class="id" title="var">t1</span> &lt;= <span class="id" title="var">t2</span>) : <span class="id" title="var">False</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">inPos_ex</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">e1</span> <span class="id" title="var">H0</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H12</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">pre_del_suff</span> <span class="id" title="var">n</span> <span class="id" title="var">m1</span> <span class="id" title="var">t1</span> <span class="id" title="var">i</span> <span class="id" title="var">l1</span> <span class="id" title="var">X</span> <span class="id" title="var">H7</span> <span class="id" title="var">H13</span> <span class="id" title="var">H3</span>). <span class="id" title="var">decompose</span> [<span class="id" title="var">ex</span>] <span class="id" title="var">H12</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H12</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x1</span> <span class="id" title="var">into</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x2</span> <span class="id" title="var">into</span> <span class="id" title="var">l'</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x3</span> <span class="id" title="var">into</span> <span class="id" title="var">l''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decompose</span> [<span class="id" title="var">and</span>] <span class="id" title="var">H15</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H15</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> &lt; <span class="id" title="var">t2</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rlt_le_trans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H17</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rmult_le_compat_l</span> (2*<span class="id" title="var">speedMax</span>) <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">upper</span> (<span class="id" title="var">preDeliveredInterval</span> <span class="id" title="var">m1</span>)) <span class="id" title="var">speedMax_double_nonneg</span> <span class="id" title="var">H20</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">Rplus_lt_le_compat</span> <span class="id" title="var">x</span> <span class="id" title="var">mdc</span> (2 * <span class="id" title="var">speedMax</span> * <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;(2 * <span class="id" title="var">speedMax</span> * <span class="id" title="var">upper</span> (<span class="id" title="var">preDeliveredInterval</span> <span class="id" title="var">m1</span>)) <span class="id" title="var">H2</span> <span class="id" title="var">H21</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">sufficient</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H16</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">maxMinDistCompBound</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqmdc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H23</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> + 2*<span class="id" title="var">speedMax</span>*<span class="id" title="var">t</span> &lt; <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rlt_le_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H22</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_trans</span>;[ |<span class="id" title="tactic">apply</span> <span class="id" title="var">H16</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rplus_le_compat</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H24</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">delivered_received</span> <span class="id" title="var">n</span> ([<span class="id" title="var">baseMode</span> <span class="id" title="var">m1</span>, <span class="id" title="var">basePosition</span> <span class="id" title="var">l'</span>])<br/>
&nbsp;&nbsp;<span class="id" title="var">t</span> <span class="id" title="var">r</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">X</span> <span class="id" title="var">l''</span> <span class="id" title="var">H12</span> <span class="id" title="var">H</span> (<span class="id" title="var">distNet_intro</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">Heqx</span>) <span class="id" title="var">H24</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">inPos_ex</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">e2</span> <span class="id" title="var">H1</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H26</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">inPos_pos</span> <span class="id" title="var">e1</span> <span class="id" title="var">i</span> <span class="id" title="var">l1</span> <span class="id" title="var">n</span> <span class="id" title="var">H0</span> <span class="id" title="var">H13</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">inPos_pos</span> <span class="id" title="var">e2</span> <span class="id" title="var">j</span> <span class="id" title="var">l2</span> <span class="id" title="var">n</span> <span class="id" title="var">H1</span> <span class="id" title="var">H27</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H26</span>, <span class="id" title="var">H28</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqx</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">dist_tri_ineq</span> <span class="id" title="var">l2</span> <span class="id" title="var">l1</span> <span class="id" title="var">l'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ((<span class="id" title="var">distance</span> <span class="id" title="var">x</span>) = <span class="id" title="var">dist2d</span> <span class="id" title="var">l2</span> <span class="id" title="var">l1</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">distSymmetric</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqx</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H30</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H29</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nonneg</span> (<span class="id" title="var">dist2d</span> <span class="id" title="var">l2</span> <span class="id" title="var">l'</span>) &lt;= <span class="id" title="var">nonneg</span> (<span class="id" title="var">distance</span> <span class="id" title="var">x</span>) +<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * (<span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) + <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H29</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_le_compat</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * (<span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) + <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>))) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) + <span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">H31</span>;[ | <span class="id" title="tactic">ring</span>]. <span class="id" title="tactic">assert</span> (<span class="id" title="var">nonneg</span> (<span class="id" title="var">distance</span> <span class="id" title="var">x</span>) +<br/>
&nbsp;&nbsp;(<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) +<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>)) &lt; <span class="id" title="var">mdc</span> +<br/>
&nbsp;&nbsp;(<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) +<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>))). <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_lt_le_compat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">dist2d</span> <span class="id" title="var">l2</span> <span class="id" title="var">l'</span> &lt; <span class="id" title="var">mdc</span> +<br/>
&nbsp;&nbsp;(<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) +<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>))). <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_lt_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H31</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">replace</span> (<span class="id" title="var">nonneg</span> (<span class="id" title="var">distance</span> <span class="id" title="var">mdc</span>) +<br/>
&nbsp;&nbsp;(<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) + <span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>)))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) + (<span class="id" title="var">nonneg</span> (<span class="id" title="var">distance</span> <span class="id" title="var">mdc</span>) + <br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">H33</span>;[ | <span class="id" title="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_lt_swap_rl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H33</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Rplus_lt_compat_r</span> (<span class="id" title="var">speedMax</span>*<span class="id" title="var">t</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H33</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">mdc</span> + <span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>) + <span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">mdc</span> + 2*<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H33</span>; [ | <span class="id" title="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nonneg</span> (<span class="id" title="var">dist2d</span> <span class="id" title="var">l2</span> <span class="id" title="var">l'</span>) - <span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">msgLatency</span>) +<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">nonneg</span> (<span class="id" title="var">time</span> <span class="id" title="var">t</span>) &lt;<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg</span> (<span class="id" title="var">distance</span> <span class="id" title="var">mdc</span>) + 2 * <span class="id" title="var">nonneg</span> <span class="id" title="var">speedMax</span> * <span class="id" title="var">upper</span> (<span class="id" title="var">preDeliveredInterval</span> <span class="id" title="var">m1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rlt_le_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H33</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_le_compat</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rle_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqmdc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H34</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">dist2d</span> <span class="id" title="var">l2</span> <span class="id" title="var">l'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">q0</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H34</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">minDistCompSymmetric</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H34</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<span class="id" title="var">possIncDist</span> <span class="id" title="var">m2</span> <span class="id" title="var">m1</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H34</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqq0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H34</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">zeroTime</span> &lt; <span class="id" title="var">t</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H18</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_lt_trans</span>;[ |<span class="id" title="tactic">apply</span> <span class="id" title="var">H18</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_trans</span>;[ |<span class="id" title="tactic">apply</span> <span class="id" title="var">Rmax_l</span>]. <span class="id" title="var">timeNonneg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ((<span class="id" title="var">speedMax</span> * <span class="id" title="var">t</span>) &lt; <span class="id" title="var">possIncDist</span> <span class="id" title="var">m2</span> <span class="id" title="var">m1</span>). <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_lt_trans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rmult_le_compat_l</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cond_nonneg</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H20</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">possIncDist</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rplus_lt_weaken_rl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cond_nonneg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Rmult_assoc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">double</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_double</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rmult_lt_0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">speedMax_pos</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le_zero_plus</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rlt_le_zero_plus</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Rmax_lt_l</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">adaptNotif_positive</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">cond_nonneg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cond_nonneg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">RPL</span> : <span class="id" title="var">Rminus_plus_lt_subNonnegTot</span> <span class="id" title="var">H36</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">multNonneg_Rmult_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H34</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">RPL</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H34</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H36</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">incomp_tfs</span> <span class="id" title="var">n</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span> <span class="id" title="var">l2</span> <span class="id" title="var">l'</span> <span class="id" title="var">j</span> <span class="id" title="var">m2</span> <span class="id" title="var">m1</span> <span class="id" title="var">X</span> <span class="id" title="var">H8</span> <span class="id" title="var">H27</span> <span class="id" title="var">H25</span> <span class="id" title="var">H35</span> <span class="id" title="var">H15</span> <span class="id" title="var">H34</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">tfs_bound</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H36</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H18</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">transMax</span> &lt; <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_lt_trans</span>;[ |<span class="id" title="tactic">apply</span> <span class="id" title="var">H18</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="var">Rmax_r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Rlt_not_le</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H37</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Rle_trans</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H36</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transMaxBound</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This is the main result stating the correctness of the protocol. It says that if a network
is reachable, then it is safe. To recap, what this means is that, if we start out a system in
which all the entities are fail safe and running the protocol process as their software
component, and we allow this system to evolve via any finite number of delays and discrete
actions as per our transition semantics, then we end up with a network which is safe. Safety
itself is defined elsewhere, but basically means that all pairs of entities in the network are
separated by a sufficient distance to ensure that they are not incompatible according to their
respective modes. The sufficiency of the distance in question is in turn decided by parameters
of the specific system in question
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">safety</span> (<span class="id" title="var">n</span> : <span class="id" title="var">Network</span>) : <span class="id" title="var">reachableNet</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">safe</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">safe</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">dec_compatible</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>). <span class="id" title="var">appDisj</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">compatible</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">dist2d</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">not_Rle_lt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">minDistComp</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">mdc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">currModeEnt</span> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">m1</span>. <span class="id" title="var">remember</span> (<span class="id" title="var">currModeEnt</span> <span class="id" title="var">e2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">m2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">False_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (~<span class="id" title="var">failSafe</span> <span class="id" title="var">m1</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">fsDecMode</span> <span class="id" title="var">m1</span>). <span class="id" title="var">appDisj</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">minDistCompFS</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span> <span class="id" title="var">H3</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqmdc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqmdc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg_lt0_contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (~<span class="id" title="var">failSafe</span> <span class="id" title="var">m2</span>). <span class="id" title="var">addHyp</span> (<span class="id" title="var">fsDecMode</span> <span class="id" title="var">m2</span>). <span class="id" title="var">appDisj</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">minDistCompFS</span> <span class="id" title="var">m2</span> <span class="id" title="var">m1</span> <span class="id" title="var">H4</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">minDistCompSymmetric</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqmdc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqmdc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nonneg_lt0_contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">currMode_intro</span> <span class="id" title="var">m1</span> <span class="id" title="var">e1</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">Heqm1</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">currMode_intro</span> <span class="id" title="var">m2</span> <span class="id" title="var">e2</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">Heqm2</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">nonFS_currSince</span> <span class="id" title="var">m1</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span> <span class="id" title="var">H5</span> <span class="id" title="var">H3</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">nonFS_currSince</span> <span class="id" title="var">m2</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span> <span class="id" title="var">H6</span> <span class="id" title="var">H4</span>). <span class="id" title="var">invertClear</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">currSince_lower_bound</span> <span class="id" title="var">n</span> <span class="id" title="var">t1</span> <span class="id" title="var">m1</span> <span class="id" title="var">i</span> <span class="id" title="var">X</span> <span class="id" title="var">H8</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">addHyp</span> (<span class="id" title="var">currSince_lower_bound</span> <span class="id" title="var">n</span> <span class="id" title="var">t2</span> <span class="id" title="var">m2</span> <span class="id" title="var">j</span> <span class="id" title="var">X</span> <span class="id" title="var">H9</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">lt_notEq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">addHyp</span> (<span class="id" title="var">Rle_or_le</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">mkDistance</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">x'</span>. <span class="id" title="var">swapRename</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqx</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqx'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> &lt; <span class="id" title="var">mdc</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqx'</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqx</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">invertClear</span> <span class="id" title="var">H11</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">safety_aux</span>;<span class="id" title="var">eassumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">notEq_symm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">distSymmetric</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqx'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">minDistCompSymmetric</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqmdc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">safety_aux</span>;<span class="id" title="var">eassumption</span>.<br/>
</div>

<div class="doc">
Proof is then continued by the auxiliary result safety_aux</div>
<div class="code">
 <span class="id" title="keyword">Qed</span>.<br/>
</div>
<hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>